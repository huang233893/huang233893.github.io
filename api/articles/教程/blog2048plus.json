{"title":"Hexoåšå®¢æ·»åŠ 2048","slug":"æ•™ç¨‹/blog2048plus","date":"2025-10-06T15:20:13.000Z","updated":"2025-10-06T16:18:46.309Z","comments":true,"path":"api/articles/æ•™ç¨‹/blog2048plus.json","excerpt":null,"covers":["https://cdn.sumi233.top/gh/huang233893/blog-image-bed@main/top/huang233893/imgs/blog/2048-1.jpg"],"content":"<h1 id=\"å‰æ\"><a href=\"#å‰æ\" class=\"headerlink\" title=\"å‰æ\"></a>å‰æ</h1><div class=\"note orange anzhiyufont anzhiyu-icon-bullhorn flat\"><p>æˆªç¨¿å‰åˆšå¥½åˆ°10æœˆ6æ—¥ä¸­ç§‹èŠ‚ğŸŒ™ï¼Œé…¥ç±³ç¥å„ä½ä¸­ç§‹èŠ‚å¿«ä¹å–ï¼ğŸ˜€</p>\n</div>\n\n<p>æœ€è¿‘çœ‹åˆ°å½©è›‹é¡µç©ºç€ï¼Œäºæ˜¯çªå‘å¥‡æƒ³ï¼Œåšä¸€ä¸ª2048å°æ¸¸æˆåµŒå…¥åœ¨é‡Œé¢ï¼Œäºæ˜¯æˆ‘â€è¯·æ•™â€œäº†ä¸‡èƒ½çš„è±†åŒ…ï¼Œå¾—åˆ°äº†ä»¥ä¸‹é¡¹ç›®</p>\n<h1 id=\"Demo\"><a href=\"#Demo\" class=\"headerlink\" title=\"Demo\"></a>Demo</h1><p>æœ¬ç«™å·²ç»å†…åµŒæ­¤é¡¹ç›®ï¼Œå¯ä»¥å»åº·åº·å“¦~ </p>\n<div calss=\"anzhiyu-tag-link\"><a class=\"tag-Link\" target=\"_blank\" href=\"/Fun/\">\n    <div class=\"tag-link-tips\">å¼•ç”¨ç«™å¤–åœ°å€</div>\n    <div class=\"tag-link-bottom\">\n        <div class=\"tag-link-left\" style>\n          <i class=\"anzhiyufont anzhiyu-icon-link\" style></i>\n        </div>\n        <div class=\"tag-link-right\">\n            <div class=\"tag-link-title\">2048å°æ¸¸æˆ</div>\n            <div class=\"tag-link-sitename\">é…¥ç±³çš„å°ç«™</div>\n        </div>\n        <i class=\"anzhiyufont anzhiyu-icon-angle-right\"></i>\n    </div>\n    </a></div>\n\n<h1 id=\"ä¼˜åŠ¿\"><a href=\"#ä¼˜åŠ¿\" class=\"headerlink\" title=\"ä¼˜åŠ¿\"></a>ä¼˜åŠ¿</h1><ul>\n<li><p><strong>å®Œå…¨éš”ç¦»ï¼Œä¸å¹²æ‰°åšå®¢</strong></p>\n<ul>\n<li>æ‰€æœ‰å…ƒç´ å’Œé€»è¾‘å°è£…åœ¨ç‹¬ç«‹å®¹å™¨ <code>game-2048-container</code> ä¸­ï¼Œé€šè¿‡å†…è”æ ·å¼å’Œå®¹å™¨é™å®šä½œç”¨åŸŸï¼Œä¸ä¼šæ±¡æŸ“åšå®¢åŸæœ‰CSSå’ŒJSã€‚</li>\n<li>ä¸ä¾èµ–ä»»ä½•å¤–éƒ¨èµ„æºï¼ˆæ— å›¾ç‰‡ã€æ— å­—ä½“æ–‡ä»¶ï¼‰ï¼Œçº¯åŸç”ŸHTML+CSS+JSå®ç°ï¼ŒåŠ è½½é€Ÿåº¦å¿«ï¼Œä¸å¢åŠ åšå®¢åŠ è½½è´Ÿæ‹…ã€‚</li>\n</ul>\n</li>\n<li><p><strong>é€‚é…Hexo Anzhiyuä¸»é¢˜</strong></p>\n<ul>\n<li>æ˜æš—æ¨¡å¼è‡ªåŠ¨åˆ‡æ¢ï¼šé€šè¿‡æ£€æµ‹ä¸»é¢˜ <code>html</code> æ ‡ç­¾çš„ <code>dark</code> ç±»ï¼ŒåŠ¨æ€è°ƒæ•´æ–¹å—é¢œè‰²ã€èƒŒæ™¯è‰²ï¼Œç¡®ä¿åœ¨äº®è‰²&#x2F;æš—è‰²æ¨¡å¼ä¸‹éƒ½æœ‰æ¸…æ™°çš„è§†è§‰å¯¹æ¯”ï¼ˆä¾‹å¦‚æš—è‰²æ¨¡å¼ä¸‹æ–¹å—ç”¨æ·±è‰²èƒŒæ™¯+æµ…è‰²æ–‡å­—ï¼Œäº®è‰²æ¨¡å¼ç›¸åï¼‰ã€‚</li>\n<li>é£æ ¼ç»Ÿä¸€ï¼šä½¿ç”¨ä¸»é¢˜å†…ç½®CSSå˜é‡ï¼ˆ<code>--card-bg</code> å¡ç‰‡èƒŒæ™¯ã€<code>--text-color</code> æ–‡å­—è‰²ç­‰ï¼‰ï¼Œä¸åšå®¢æ•´ä½“é£æ ¼æ— ç¼èåˆã€‚</li>\n</ul>\n</li>\n<li><p><strong>å¤šè®¾å¤‡äº¤äº’å‹å¥½</strong></p>\n<ul>\n<li>é”®ç›˜æ§åˆ¶ï¼šæ”¯æŒæ–¹å‘é”®ï¼ˆâ†‘â†“â†â†’ï¼‰ç§»åŠ¨æ–¹å—ï¼Œæ“ä½œç¬¦åˆåŸç‰ˆ2048ä¹ æƒ¯ã€‚</li>\n<li>è§¦å±ä¼˜åŒ–ï¼šæ»‘åŠ¨å±å¹•ï¼ˆä¸Šä¸‹å·¦å³ï¼‰å¯æ§åˆ¶æ–¹å—ç§»åŠ¨ï¼Œæ»‘åŠ¨é˜ˆå€¼åˆç†ï¼ˆé¿å…è¯¯è§¦ï¼‰ã€‚</li>\n<li>æ ¸å¿ƒä¼˜åŒ–ï¼šé€šè¿‡ <code>e.preventDefault()</code> å’Œ <code>touch-action: none</code> é˜»æ­¢è§¦å±æ»‘åŠ¨æ—¶è§¦å‘æ•´ä¸ªåšå®¢é¡µé¢çš„æ»šåŠ¨ï¼Œä¸“æ³¨æ¸¸æˆæ“ä½œã€‚</li>\n<li>æ“ä½œåé¦ˆï¼šæŒ‰é’®çŠ¶æ€åŠ¨æ€å˜åŒ–ï¼ˆå¦‚â€œæ’¤å›â€æŒ‰é’®åœ¨æ— å†å²è®°å½•æ—¶ç¦ç”¨å¹¶åŠé€æ˜ï¼‰ã€‚</li>\n</ul>\n</li>\n<li><p><strong>å®Œæ•´æ¸¸æˆåŠŸèƒ½</strong></p>\n<ul>\n<li>æ ¸å¿ƒç©æ³•ï¼šéšæœºç”Ÿæˆ2&#x2F;4æ–¹å—ï¼Œæ»‘åŠ¨åˆå¹¶ç›¸åŒæ•°å­—ï¼Œç›®æ ‡åˆæˆ2048ã€‚</li>\n<li>æ’¤å›åŠŸèƒ½ï¼šé€šè¿‡å†å²è®°å½•æ ˆä¿å­˜æœ€è¿‘10æ­¥çš„æ¸¸æˆçŠ¶æ€ï¼ˆç½‘æ ¼+åˆ†æ•°ï¼‰ï¼Œç‚¹å‡»â€œæ’¤å›â€å¯å›åˆ°ä¸Šä¸€æ­¥ï¼Œæå‡å®¹é”™æ€§ã€‚</li>\n<li>çŠ¶æ€åˆ¤æ–­ï¼šè‡ªåŠ¨æ£€æµ‹èƒœåˆ©ï¼ˆåˆæˆ2048ï¼‰å’Œå¤±è´¥ï¼ˆæ— ç©ºä½ä¸”æ— æ³•åˆå¹¶ï¼‰ï¼Œå¹¶å¼¹çª—æç¤ºã€‚</li>\n<li>åˆ†æ•°ç³»ç»Ÿï¼šå®æ—¶æ˜¾ç¤ºå½“å‰åˆ†æ•°ï¼Œåˆå¹¶æ–¹å—æ—¶è‡ªåŠ¨ç´¯åŠ ã€‚</li>\n</ul>\n</li>\n<li><p><strong>è½»é‡ç²¾ç®€</strong></p>\n<ul>\n<li>ä»£ç é‡çº¦600è¡Œï¼Œé€»è¾‘æ¸…æ™°ï¼Œæ— å†—ä½™ä»£ç ã€‚</li>\n<li>æ£‹ç›˜ä½¿ç”¨CSS Gridå¸ƒå±€ï¼Œè‡ªé€‚åº”å®¹å™¨å¤§å°ï¼Œåœ¨æ‰‹æœºã€ç”µè„‘ä¸Šå‡å¯æ­£å¸¸æ˜¾ç¤ºï¼ˆé»˜è®¤æœ€å¤§å®½åº¦400pxï¼Œå¯æŒ‰éœ€è°ƒæ•´ï¼‰ã€‚</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"åˆ›å»ºç•Œé¢\"><a href=\"#åˆ›å»ºç•Œé¢\" class=\"headerlink\" title=\"åˆ›å»ºç•Œé¢\"></a>åˆ›å»ºç•Œé¢</h1><p>å¯ä»¥å…ˆä½¿ç”¨æŒ‡ä»¤å•ç‹¬åˆ›å»ºä¸€ä¸ª2048çš„é¡µé¢</p>\n<p><code>hexo new pages &quot;é¡µé¢åç§°&quot;</code></p>\n<p>ç„¶åä½¿ç”¨å·¥å…·ç¼–è¾‘<code>â€œé¡µé¢åç§°â€/index.md</code></p>\n<h1 id=\"ä½¿ç”¨æ–¹æ³•\"><a href=\"#ä½¿ç”¨æ–¹æ³•\" class=\"headerlink\" title=\"ä½¿ç”¨æ–¹æ³•\"></a>ä½¿ç”¨æ–¹æ³•</h1><p>ç›´æ¥å°†ä»£ç å¤åˆ¶åˆ°Hexoçš„Markdownæ–‡ç« ï¼ˆ<code>.md</code>æ–‡ä»¶ï¼‰ä¸­ï¼Œéƒ¨ç½²åå³å¯åœ¨åšå®¢ä¸­è¿è¡Œï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚å¦‚éœ€è°ƒæ•´å¤§å°ï¼Œä¿®æ”¹å®¹å™¨çš„<code>max-width</code>æ ·å¼å³å¯ã€‚</p>\n<h1 id=\"ä»£ç \"><a href=\"#ä»£ç \" class=\"headerlink\" title=\"ä»£ç \"></a>ä»£ç </h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=&quot;game-2048-container&quot; style=&quot;max-width: 400px; margin: 20px auto; padding: 15px; border-radius: 8px; transition: all 0.3s ease; background: var(--card-bg); touch-action: none;&quot;&gt;</span><br><span class=\"line\">  &lt;!-- åˆ†æ•°ä¸æ§åˆ¶åŒº --&gt;</span><br><span class=\"line\">  &lt;div style=&quot;display: flex; justify-content: space-between; margin-bottom: 15px; font-family: &#x27;Segoe UI&#x27;, Arial;&quot;&gt;</span><br><span class=\"line\">    &lt;div style=&quot;font-size: 24px; font-weight: bold; color: var(--text-color);&quot;&gt;2048&lt;/div&gt;</span><br><span class=\"line\">    &lt;div style=&quot;background: var(--primary-color); color: white; padding: 5px 10px; border-radius: 4px;&quot;&gt;</span><br><span class=\"line\">      åˆ†æ•°: &lt;span id=&quot;score-2048&quot;&gt;0&lt;/span&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;div style=&quot;display: flex; gap: 5px;&quot;&gt;</span><br><span class=\"line\">      &lt;!-- æŒ‰é’®å¢å¤§ç‚¹å‡»åŒºåŸŸå¹¶æ·»åŠ è§¦æ‘¸åé¦ˆ --&gt;</span><br><span class=\"line\">      &lt;button id=&quot;undo-2048&quot; style=&quot;background: var(--btn-bg); color: var(--btn-color); border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; opacity: 0.5; touch-action: manipulation;&quot; disabled&gt;</span><br><span class=\"line\">        æ’¤å›</span><br><span class=\"line\">      &lt;/button&gt;</span><br><span class=\"line\">      &lt;button id=&quot;reset-2048&quot; style=&quot;background: var(--btn-bg); color: var(--btn-color); border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; touch-action: manipulation;&quot;&gt;</span><br><span class=\"line\">        é‡ç½®</span><br><span class=\"line\">      &lt;/button&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">  &lt;!-- æ¸¸æˆæ£‹ç›˜ --&gt;</span><br><span class=\"line\">  &lt;div id=&quot;game-2048-board&quot; style=&quot;display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">  &lt;!-- æ“ä½œè¯´æ˜ --&gt;</span><br><span class=\"line\">  &lt;div style=&quot;margin-top: 15px; font-size: 14px; color: var(--text-color); font-family: &#x27;Segoe UI&#x27;, Arial;&quot;&gt;</span><br><span class=\"line\">    &lt;p&gt;æ“ä½œï¼šæ–¹å‘é”®æˆ–æ»‘åŠ¨å±å¹•ç§»åŠ¨æ–¹å—ï¼Œç›¸åŒæ•°å­—ç¢°æ’å°†åˆå¹¶&lt;/p&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">const container = document.getElementById(&#x27;game-2048-container&#x27;);</span><br><span class=\"line\">if (container) &#123;</span><br><span class=\"line\">  // è·å–DOMå…ƒç´ </span><br><span class=\"line\">  const boardEl = container.querySelector(&#x27;#game-2048-board&#x27;);</span><br><span class=\"line\">  const scoreEl = container.querySelector(&#x27;#score-2048&#x27;);</span><br><span class=\"line\">  const resetBtn = container.querySelector(&#x27;#reset-2048&#x27;);</span><br><span class=\"line\">  const undoBtn = container.querySelector(&#x27;#undo-2048&#x27;);</span><br><span class=\"line\">  </span><br><span class=\"line\">  // æ¸¸æˆé…ç½®</span><br><span class=\"line\">  const SIZE = 4;</span><br><span class=\"line\">  let grid = [];</span><br><span class=\"line\">  let score = 0;</span><br><span class=\"line\">  let isDarkMode = false;</span><br><span class=\"line\">  let history = [];</span><br><span class=\"line\">  let isTouching = false;</span><br><span class=\"line\">  let touchTarget = null; // è®°å½•è§¦æ‘¸ç›®æ ‡ï¼ŒåŒºåˆ†æŒ‰é’®å’Œæ£‹ç›˜</span><br><span class=\"line\">  </span><br><span class=\"line\">  // é¢œè‰²æ˜ å°„ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const getColors = (value) =&gt; &#123;</span><br><span class=\"line\">    const colors = &#123;</span><br><span class=\"line\">      2: &#123; bg: isDarkMode ? &#x27;#3a3a3a&#x27; : &#x27;#eee4da&#x27;, text: isDarkMode ? &#x27;#fff&#x27; : &#x27;#776e65&#x27; &#125;,</span><br><span class=\"line\">      4: &#123; bg: isDarkMode ? &#x27;#4a4a4a&#x27; : &#x27;#ede0c8&#x27;, text: isDarkMode ? &#x27;#fff&#x27; : &#x27;#776e65&#x27; &#125;,</span><br><span class=\"line\">      8: &#123; bg: isDarkMode ? &#x27;#ff9966&#x27; : &#x27;#f2b179&#x27;, text: &#x27;#f9f6f2&#x27; &#125;,</span><br><span class=\"line\">      16: &#123; bg: isDarkMode ? &#x27;#ff7733&#x27; : &#x27;#f59563&#x27;, text: &#x27;#f9f6f2&#x27; &#125;,</span><br><span class=\"line\">      32: &#123; bg: isDarkMode ? &#x27;#ff5500&#x27; : &#x27;#f67c5f&#x27;, text: &#x27;#f9f6f2&#x27; &#125;,</span><br><span class=\"line\">      64: &#123; bg: isDarkMode ? &#x27;#ff3300&#x27; : &#x27;#f65e3b&#x27;, text: &#x27;#f9f6f2&#x27; &#125;,</span><br><span class=\"line\">      128: &#123; bg: isDarkMode ? &#x27;#ffcc66&#x27; : &#x27;#edcf72&#x27;, text: &#x27;#f9f6f2&#x27; &#125;,</span><br><span class=\"line\">      256: &#123; bg: isDarkMode ? &#x27;#ffbb33&#x27; : &#x27;#edcc61&#x27;, text: &#x27;#f9f6f2&#x27; &#125;,</span><br><span class=\"line\">      512: &#123; bg: isDarkMode ? &#x27;#ffaa00&#x27; : &#x27;#edc850&#x27;, text: &#x27;#f9f6f2&#x27; &#125;,</span><br><span class=\"line\">      1024: &#123; bg: isDarkMode ? &#x27;#ff9900&#x27; : &#x27;#edc53f&#x27;, text: &#x27;#f9f6f2&#x27; &#125;,</span><br><span class=\"line\">      2048: &#123; bg: isDarkMode ? &#x27;#ff8800&#x27; : &#x27;#edc22e&#x27;, text: &#x27;#f9f6f2&#x27; &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    if (!colors[value]) &#123;</span><br><span class=\"line\">      colors[value] = &#123; bg: isDarkMode ? &#x27;#ff5555&#x27; : &#x27;#3c3a32&#x27;, text: &#x27;#f9f6f2&#x27; &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return colors[value];</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // åˆå§‹åŒ–ç½‘æ ¼ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const initGrid = () =&gt; &#123;</span><br><span class=\"line\">    grid = Array(SIZE).fill().map(() =&gt; Array(SIZE).fill(0));</span><br><span class=\"line\">    score = 0;</span><br><span class=\"line\">    history = [];</span><br><span class=\"line\">    scoreEl.textContent = &#x27;0&#x27;;</span><br><span class=\"line\">    addRandomNumber();</span><br><span class=\"line\">    addRandomNumber();</span><br><span class=\"line\">    updateUndoBtn();</span><br><span class=\"line\">    renderGrid();</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // ä¿å­˜å†å²è®°å½•ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const saveHistory = () =&gt; &#123;</span><br><span class=\"line\">    const gridCopy = JSON.parse(JSON.stringify(grid));</span><br><span class=\"line\">    history.push(&#123; grid: gridCopy, score: score &#125;);</span><br><span class=\"line\">    if (history.length &gt; 10) history.shift();</span><br><span class=\"line\">    updateUndoBtn();</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // æ’¤å›æ“ä½œï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const undoMove = () =&gt; &#123;</span><br><span class=\"line\">    if (history.length === 0) return;</span><br><span class=\"line\">    const lastState = history.pop();</span><br><span class=\"line\">    grid = lastState.grid;</span><br><span class=\"line\">    score = lastState.score;</span><br><span class=\"line\">    scoreEl.textContent = score;</span><br><span class=\"line\">    updateUndoBtn();</span><br><span class=\"line\">    renderGrid();</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // æ›´æ–°æ’¤å›æŒ‰é’®çŠ¶æ€ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const updateUndoBtn = () =&gt; &#123;</span><br><span class=\"line\">    undoBtn.disabled = history.length === 0;</span><br><span class=\"line\">    undoBtn.style.opacity = history.length === 0 ? &#x27;0.5&#x27; : &#x27;1&#x27;;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // éšæœºç”Ÿæˆæ•°å­—ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const addRandomNumber = () =&gt; &#123;</span><br><span class=\"line\">    const emptyCells = [];</span><br><span class=\"line\">    for (let i = 0; i &lt; SIZE; i++) &#123;</span><br><span class=\"line\">      for (let j = 0; j &lt; SIZE; j++) &#123;</span><br><span class=\"line\">        if (grid[i][j] === 0) emptyCells.push(&#123; i, j &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    if (emptyCells.length === 0) return false;</span><br><span class=\"line\">    const &#123; i, j &#125; = emptyCells[Math.floor(Math.random() * emptyCells.length)];</span><br><span class=\"line\">    grid[i][j] = Math.random() &lt; 0.9 ? 2 : 4;</span><br><span class=\"line\">    return true;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // æ¸²æŸ“ç½‘æ ¼ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const renderGrid = () =&gt; &#123;</span><br><span class=\"line\">    boardEl.innerHTML = &#x27;&#x27;;</span><br><span class=\"line\">    for (let i = 0; i &lt; SIZE; i++) &#123;</span><br><span class=\"line\">      for (let j = 0; j &lt; SIZE; j++) &#123;</span><br><span class=\"line\">        const cell = document.createElement(&#x27;div&#x27;);</span><br><span class=\"line\">        const value = grid[i][j];</span><br><span class=\"line\">        cell.style.width = &#x27;80px&#x27;;</span><br><span class=\"line\">        cell.style.height = &#x27;80px&#x27;;</span><br><span class=\"line\">        cell.style.borderRadius = &#x27;4px&#x27;;</span><br><span class=\"line\">        cell.style.display = &#x27;flex&#x27;;</span><br><span class=\"line\">        cell.style.alignItems = &#x27;center&#x27;;</span><br><span class=\"line\">        cell.style.justifyContent = &#x27;center&#x27;;</span><br><span class=\"line\">        cell.style.fontWeight = &#x27;bold&#x27;;</span><br><span class=\"line\">        cell.style.transition = &#x27;all 0.2s ease&#x27;;</span><br><span class=\"line\">        cell.style.fontFamily = &#x27;Arial, sans-serif&#x27;;</span><br><span class=\"line\">        </span><br><span class=\"line\">        if (value === 0) &#123;</span><br><span class=\"line\">          cell.style.background = isDarkMode ? &#x27;#2a2a2a&#x27; : &#x27;#cdc1b4&#x27;;</span><br><span class=\"line\">          cell.style.color = &#x27;transparent&#x27;;</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">          const &#123; bg, text &#125; = getColors(value);</span><br><span class=\"line\">          cell.style.background = bg;</span><br><span class=\"line\">          cell.style.color = text;</span><br><span class=\"line\">          cell.style.fontSize = value &lt; 100 ? &#x27;24px&#x27; : value &lt; 1000 ? &#x27;20px&#x27; : &#x27;16px&#x27;;</span><br><span class=\"line\">          cell.textContent = value;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        boardEl.appendChild(cell);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // ç§»åŠ¨é€»è¾‘ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const moveLeft = () =&gt; &#123;</span><br><span class=\"line\">    let moved = false;</span><br><span class=\"line\">    for (let i = 0; i &lt; SIZE; i++) &#123;</span><br><span class=\"line\">      for (let j = 1; j &lt; SIZE; j++) &#123;</span><br><span class=\"line\">        if (grid[i][j] !== 0) &#123;</span><br><span class=\"line\">          let k = j;</span><br><span class=\"line\">          while (k &gt; 0 &amp;&amp; grid[i][k - 1] === 0) &#123;</span><br><span class=\"line\">            grid[i][k - 1] = grid[i][k];</span><br><span class=\"line\">            grid[i][k] = 0;</span><br><span class=\"line\">            k--;</span><br><span class=\"line\">            moved = true;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          if (k &gt; 0 &amp;&amp; grid[i][k - 1] === grid[i][k]) &#123;</span><br><span class=\"line\">            grid[i][k - 1] *= 2;</span><br><span class=\"line\">            score += grid[i][k - 1];</span><br><span class=\"line\">            grid[i][k] = 0;</span><br><span class=\"line\">            moved = true;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return moved;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  const moveRight = () =&gt; &#123;</span><br><span class=\"line\">    let moved = false;</span><br><span class=\"line\">    for (let i = 0; i &lt; SIZE; i++) &#123;</span><br><span class=\"line\">      for (let j = SIZE - 2; j &gt;= 0; j--) &#123;</span><br><span class=\"line\">        if (grid[i][j] !== 0) &#123;</span><br><span class=\"line\">          let k = j;</span><br><span class=\"line\">          while (k &lt; SIZE - 1 &amp;&amp; grid[i][k + 1] === 0) &#123;</span><br><span class=\"line\">            grid[i][k + 1] = grid[i][k];</span><br><span class=\"line\">            grid[i][k] = 0;</span><br><span class=\"line\">            k++;</span><br><span class=\"line\">            moved = true;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          if (k &lt; SIZE - 1 &amp;&amp; grid[i][k + 1] === grid[i][k]) &#123;</span><br><span class=\"line\">            grid[i][k + 1] *= 2;</span><br><span class=\"line\">            score += grid[i][k + 1];</span><br><span class=\"line\">            grid[i][k] = 0;</span><br><span class=\"line\">            moved = true;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return moved;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  const moveUp = () =&gt; &#123;</span><br><span class=\"line\">    let moved = false;</span><br><span class=\"line\">    for (let j = 0; j &lt; SIZE; j++) &#123;</span><br><span class=\"line\">      for (let i = 1; i &lt; SIZE; i++) &#123;</span><br><span class=\"line\">        if (grid[i][j] !== 0) &#123;</span><br><span class=\"line\">          let k = i;</span><br><span class=\"line\">          while (k &gt; 0 &amp;&amp; grid[k - 1][j] === 0) &#123;</span><br><span class=\"line\">            grid[k - 1][j] = grid[k][j];</span><br><span class=\"line\">            grid[k][j] = 0;</span><br><span class=\"line\">            k--;</span><br><span class=\"line\">            moved = true;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          if (k &gt; 0 &amp;&amp; grid[k - 1][j] === grid[k][j]) &#123;</span><br><span class=\"line\">            grid[k - 1][j] *= 2;</span><br><span class=\"line\">            score += grid[k - 1][j];</span><br><span class=\"line\">            grid[k][j] = 0;</span><br><span class=\"line\">            moved = true;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return moved;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  const moveDown = () =&gt; &#123;</span><br><span class=\"line\">    let moved = false;</span><br><span class=\"line\">    for (let j = 0; j &lt; SIZE; j++) &#123;</span><br><span class=\"line\">      for (let i = SIZE - 2; i &gt;= 0; i--) &#123;</span><br><span class=\"line\">        if (grid[i][j] !== 0) &#123;</span><br><span class=\"line\">          let k = i;</span><br><span class=\"line\">          while (k &lt; SIZE - 1 &amp;&amp; grid[k + 1][j] === 0) &#123;</span><br><span class=\"line\">            grid[k + 1][j] = grid[k][j];</span><br><span class=\"line\">            grid[k][j] = 0;</span><br><span class=\"line\">            k++;</span><br><span class=\"line\">            moved = true;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          if (k &lt; SIZE - 1 &amp;&amp; grid[k + 1][j] === grid[k][j]) &#123;</span><br><span class=\"line\">            grid[k + 1][j] *= 2;</span><br><span class=\"line\">            score += grid[k + 1][j];</span><br><span class=\"line\">            grid[k][j] = 0;</span><br><span class=\"line\">            moved = true;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return moved;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // å¤„ç†ç§»åŠ¨ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const handleMove = (direction) =&gt; &#123;</span><br><span class=\"line\">    let moved;</span><br><span class=\"line\">    switch (direction) &#123;</span><br><span class=\"line\">      case &#x27;left&#x27;: moved = moveLeft(); break;</span><br><span class=\"line\">      case &#x27;right&#x27;: moved = moveRight(); break;</span><br><span class=\"line\">      case &#x27;up&#x27;: moved = moveUp(); break;</span><br><span class=\"line\">      case &#x27;down&#x27;: moved = moveDown(); break;</span><br><span class=\"line\">      default: return;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    if (moved) &#123;</span><br><span class=\"line\">      saveHistory();</span><br><span class=\"line\">      scoreEl.textContent = score;</span><br><span class=\"line\">      addRandomNumber();</span><br><span class=\"line\">      renderGrid();</span><br><span class=\"line\">      checkGameState();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // æ£€æŸ¥æ¸¸æˆçŠ¶æ€ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const checkGameState = () =&gt; &#123;</span><br><span class=\"line\">    for (let i = 0; i &lt; SIZE; i++) &#123;</span><br><span class=\"line\">      for (let j = 0; j &lt; SIZE; j++) &#123;</span><br><span class=\"line\">        if (grid[i][j] === 2048) &#123;</span><br><span class=\"line\">          setTimeout(() =&gt; alert(&#x27;æ­å–œä½ èµ¢äº†ï¼&#x27;), 300);</span><br><span class=\"line\">          return;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    for (let i = 0; i &lt; SIZE; i++) &#123;</span><br><span class=\"line\">      for (let j = 0; j &lt; SIZE; j++) &#123;</span><br><span class=\"line\">        if (grid[i][j] === 0) return;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    for (let i = 0; i &lt; SIZE; i++) &#123;</span><br><span class=\"line\">      for (let j = 0; j &lt; SIZE - 1; j++) &#123;</span><br><span class=\"line\">        if (grid[i][j] === grid[i][j + 1]) return;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    for (let j = 0; j &lt; SIZE; j++) &#123;</span><br><span class=\"line\">      for (let i = 0; i &lt; SIZE - 1; i++) &#123;</span><br><span class=\"line\">        if (grid[i][j] === grid[i + 1][j]) return;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    setTimeout(() =&gt; alert(&#x27;æ¸¸æˆç»“æŸï¼å¾—åˆ†ï¼š&#x27; + score), 300);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // æ˜æš—æ¨¡å¼é€‚é…ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const checkThemeMode = () =&gt; &#123;</span><br><span class=\"line\">    isDarkMode = document.documentElement.classList.contains(&#x27;dark&#x27;);</span><br><span class=\"line\">    renderGrid();</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  const themeObserver = new MutationObserver(() =&gt; checkThemeMode());</span><br><span class=\"line\">  themeObserver.observe(document.documentElement, &#123; attributes: true &#125;);</span><br><span class=\"line\">  </span><br><span class=\"line\">  // é”®ç›˜æ§åˆ¶ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const handleKeydown = (e) =&gt; &#123;</span><br><span class=\"line\">    switch (e.key) &#123;</span><br><span class=\"line\">      case &#x27;ArrowLeft&#x27;: handleMove(&#x27;left&#x27;); e.preventDefault(); break;</span><br><span class=\"line\">      case &#x27;ArrowRight&#x27;: handleMove(&#x27;right&#x27;); e.preventDefault(); break;</span><br><span class=\"line\">      case &#x27;ArrowUp&#x27;: handleMove(&#x27;up&#x27;); e.preventDefault(); break;</span><br><span class=\"line\">      case &#x27;ArrowDown&#x27;: handleMove(&#x27;down&#x27;); e.preventDefault(); break;</span><br><span class=\"line\">      default: return;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // è§¦å±æ§åˆ¶ï¼ˆæ ¸å¿ƒä¿®å¤ï¼šåŒºåˆ†æŒ‰é’®å’Œæ£‹ç›˜è§¦æ‘¸ï¼‰</span><br><span class=\"line\">  let touchStartX = 0, touchStartY = 0;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // è§¦æ‘¸å¼€å§‹ï¼šè®°å½•ç›®æ ‡å…ƒç´ </span><br><span class=\"line\">  const handleTouchStart = (e) =&gt; &#123;</span><br><span class=\"line\">    touchTarget = e.target; // è®°å½•è§¦æ‘¸çš„å…ƒç´ ï¼ˆæŒ‰é’®æˆ–æ£‹ç›˜ï¼‰</span><br><span class=\"line\">    // åªæœ‰è§¦æ‘¸æ£‹ç›˜æ—¶æ‰å¤„ç†æ»‘åŠ¨é€»è¾‘</span><br><span class=\"line\">    if (touchTarget === boardEl || boardEl.contains(touchTarget)) &#123;</span><br><span class=\"line\">      isTouching = true;</span><br><span class=\"line\">      touchStartX = e.touches[0].clientX;</span><br><span class=\"line\">      touchStartY = e.touches[0].clientY;</span><br><span class=\"line\">      e.preventDefault();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    // è§¦æ‘¸æŒ‰é’®æ—¶ä¸é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œç¡®ä¿ç‚¹å‡»æœ‰æ•ˆ</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // è§¦æ‘¸ç§»åŠ¨ï¼šåªåœ¨è§¦æ‘¸æ£‹ç›˜æ—¶é˜»æ­¢æ»šåŠ¨</span><br><span class=\"line\">  const handleTouchMove = (e) =&gt; &#123;</span><br><span class=\"line\">    if (isTouching &amp;&amp; (touchTarget === boardEl || boardEl.contains(touchTarget))) &#123;</span><br><span class=\"line\">      e.preventDefault(); // ä»…æ£‹ç›˜æ»‘åŠ¨é˜»æ­¢æ»šåŠ¨</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // è§¦æ‘¸ç»“æŸï¼šåŒºåˆ†å¤„ç†</span><br><span class=\"line\">  const handleTouchEnd = (e) =&gt; &#123;</span><br><span class=\"line\">    if (isTouching) &#123;</span><br><span class=\"line\">      isTouching = false;</span><br><span class=\"line\">      const touchEndX = e.changedTouches[0].clientX;</span><br><span class=\"line\">      const touchEndY = e.changedTouches[0].clientY;</span><br><span class=\"line\">      const diffX = touchEndX - touchStartX;</span><br><span class=\"line\">      const diffY = touchEndY - touchStartY;</span><br><span class=\"line\">      </span><br><span class=\"line\">      if (Math.abs(diffX) &gt; 30 || Math.abs(diffY) &gt; 30) &#123;</span><br><span class=\"line\">        if (Math.abs(diffX) &gt; Math.abs(diffY)) &#123;</span><br><span class=\"line\">          diffX &gt; 0 ? handleMove(&#x27;right&#x27;) : handleMove(&#x27;left&#x27;);</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">          diffY &gt; 0 ? handleMove(&#x27;down&#x27;) : handleMove(&#x27;up&#x27;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      e.preventDefault();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    touchTarget = null; // é‡ç½®è§¦æ‘¸ç›®æ ‡</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // ä¸ºæŒ‰é’®æ·»åŠ ä¸“é—¨çš„è§¦æ‘¸äº‹ä»¶ï¼ˆè§£å†³ç§»åŠ¨ç«¯ç‚¹å‡»æ— ååº”ï¼‰</span><br><span class=\"line\">  const handleButtonTouch = (callback) =&gt; &#123;</span><br><span class=\"line\">    return (e) =&gt; &#123;</span><br><span class=\"line\">      e.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡åˆ°å®¹å™¨</span><br><span class=\"line\">      callback();</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // äº‹ä»¶ç»‘å®šï¼ˆä¼˜åŒ–ç‰ˆï¼‰</span><br><span class=\"line\">  document.addEventListener(&#x27;keydown&#x27;, handleKeydown);</span><br><span class=\"line\">  container.addEventListener(&#x27;touchstart&#x27;, handleTouchStart, &#123; passive: false &#125;);</span><br><span class=\"line\">  container.addEventListener(&#x27;touchmove&#x27;, handleTouchMove, &#123; passive: false &#125;);</span><br><span class=\"line\">  container.addEventListener(&#x27;touchend&#x27;, handleTouchEnd, &#123; passive: false &#125;);</span><br><span class=\"line\">  </span><br><span class=\"line\">  // æŒ‰é’®å•ç‹¬ç»‘å®šè§¦æ‘¸å’Œç‚¹å‡»äº‹ä»¶ï¼Œç¡®ä¿ç§»åŠ¨ç«¯å“åº”</span><br><span class=\"line\">  resetBtn.addEventListener(&#x27;click&#x27;, initGrid);</span><br><span class=\"line\">  resetBtn.addEventListener(&#x27;touchstart&#x27;, handleButtonTouch(initGrid), &#123; passive: true &#125;);</span><br><span class=\"line\">  undoBtn.addEventListener(&#x27;click&#x27;, undoMove);</span><br><span class=\"line\">  undoBtn.addEventListener(&#x27;touchstart&#x27;, handleButtonTouch(undoMove), &#123; passive: true &#125;);</span><br><span class=\"line\">  </span><br><span class=\"line\">  // åˆå§‹åŒ–</span><br><span class=\"line\">  checkThemeMode();</span><br><span class=\"line\">  initGrid();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"é—®é¢˜\"><a href=\"#é—®é¢˜\" class=\"headerlink\" title=\"é—®é¢˜\"></a>é—®é¢˜</h1><ul>\n<li>è§¦æ§æ¨¡å¼ç¨å¾®æœ‰ç‚¹bugï¼Œåˆ·æ–°ä¸€ä¸‹èƒ½æ¢å¤</li>\n</ul>\n<h1 id=\"æˆªå›¾\"><a href=\"#æˆªå›¾\" class=\"headerlink\" title=\"æˆªå›¾\"></a>æˆªå›¾</h1><p><img src=\"https://cdn.sumi233.top/gh/huang233893/blog-image-bed@main/top/huang233893/imgs/blog/2048-1.jpg\"></p>\n<h1 id=\"Tips\"><a href=\"#Tips\" class=\"headerlink\" title=\"Tips\"></a>Tips</h1><p>æœ¬æ–‡ç« ä¸­çš„ä»£ç ä½¿ç”¨è±†åŒ…AIä¿®æ”¹è€Œæˆï¼Œå¦‚æœ‰é”™è¯¯ï¼Œè¯·æŒ‡å‡ºï¼Œé…¥ç±³å°†ä¼šåŠæ—¶æ›´æ”¹ã€‚</p>\n","more":"<h1 id=\"å‰æ\"><a href=\"#å‰æ\" class=\"headerlink\" title=\"å‰æ\"></a>å‰æ</h1><div class=\"note orange anzhiyufont anzhiyu-icon-bullhorn flat\"><p>æˆªç¨¿å‰åˆšå¥½åˆ°10æœˆ6æ—¥ä¸­ç§‹èŠ‚ğŸŒ™ï¼Œé…¥ç±³ç¥å„ä½ä¸­ç§‹èŠ‚å¿«ä¹å–ï¼ğŸ˜€</p>\n</div>\n\n<p>æœ€è¿‘çœ‹åˆ°å½©è›‹é¡µç©ºç€ï¼Œäºæ˜¯çªå‘å¥‡æƒ³ï¼Œåšä¸€ä¸ª2048å°æ¸¸æˆåµŒå…¥åœ¨é‡Œé¢ï¼Œäºæ˜¯æˆ‘â€è¯·æ•™â€œäº†ä¸‡èƒ½çš„è±†åŒ…ï¼Œå¾—åˆ°äº†ä»¥ä¸‹é¡¹ç›®</p>\n<h1 id=\"Demo\"><a href=\"#Demo\" class=\"headerlink\" title=\"Demo\"></a>Demo</h1><p>æœ¬ç«™å·²ç»å†…åµŒæ­¤é¡¹ç›®ï¼Œå¯ä»¥å»åº·åº·å“¦~ </p>\n<div calss=\"anzhiyu-tag-link\"><a class=\"tag-Link\" target=\"_blank\" href=\"/Fun/\">\n    <div class=\"tag-link-tips\">å¼•ç”¨ç«™å¤–åœ°å€</div>\n    <div class=\"tag-link-bottom\">\n        <div class=\"tag-link-left\" style>\n          <i class=\"anzhiyufont anzhiyu-icon-link\" style></i>\n        </div>\n        <div class=\"tag-link-right\">\n            <div class=\"tag-link-title\">2048å°æ¸¸æˆ</div>\n            <div class=\"tag-link-sitename\">é…¥ç±³çš„å°ç«™</div>\n        </div>\n        <i class=\"anzhiyufont anzhiyu-icon-angle-right\"></i>\n    </div>\n    </a></div>\n\n<h1 id=\"ä¼˜åŠ¿\"><a href=\"#ä¼˜åŠ¿\" class=\"headerlink\" title=\"ä¼˜åŠ¿\"></a>ä¼˜åŠ¿</h1><ul>\n<li><p><strong>å®Œå…¨éš”ç¦»ï¼Œä¸å¹²æ‰°åšå®¢</strong></p>\n<ul>\n<li>æ‰€æœ‰å…ƒç´ å’Œé€»è¾‘å°è£…åœ¨ç‹¬ç«‹å®¹å™¨ <code>game-2048-container</code> ä¸­ï¼Œé€šè¿‡å†…è”æ ·å¼å’Œå®¹å™¨é™å®šä½œç”¨åŸŸï¼Œä¸ä¼šæ±¡æŸ“åšå®¢åŸæœ‰CSSå’ŒJSã€‚</li>\n<li>ä¸ä¾èµ–ä»»ä½•å¤–éƒ¨èµ„æºï¼ˆæ— å›¾ç‰‡ã€æ— å­—ä½“æ–‡ä»¶ï¼‰ï¼Œçº¯åŸç”ŸHTML+CSS+JSå®ç°ï¼ŒåŠ è½½é€Ÿåº¦å¿«ï¼Œä¸å¢åŠ åšå®¢åŠ è½½è´Ÿæ‹…ã€‚</li>\n</ul>\n</li>\n<li><p><strong>é€‚é…Hexo Anzhiyuä¸»é¢˜</strong></p>\n<ul>\n<li>æ˜æš—æ¨¡å¼è‡ªåŠ¨åˆ‡æ¢ï¼šé€šè¿‡æ£€æµ‹ä¸»é¢˜ <code>html</code> æ ‡ç­¾çš„ <code>dark</code> ç±»ï¼ŒåŠ¨æ€è°ƒæ•´æ–¹å—é¢œè‰²ã€èƒŒæ™¯è‰²ï¼Œç¡®ä¿åœ¨äº®è‰²&#x2F;æš—è‰²æ¨¡å¼ä¸‹éƒ½æœ‰æ¸…æ™°çš„è§†è§‰å¯¹æ¯”ï¼ˆä¾‹å¦‚æš—è‰²æ¨¡å¼ä¸‹æ–¹å—ç”¨æ·±è‰²èƒŒæ™¯+æµ…è‰²æ–‡å­—ï¼Œäº®è‰²æ¨¡å¼ç›¸åï¼‰ã€‚</li>\n<li>é£æ ¼ç»Ÿä¸€ï¼šä½¿ç”¨ä¸»é¢˜å†…ç½®CSSå˜é‡ï¼ˆ<code>--card-bg</code> å¡ç‰‡èƒŒæ™¯ã€<code>--text-color</code> æ–‡å­—è‰²ç­‰ï¼‰ï¼Œä¸åšå®¢æ•´ä½“é£æ ¼æ— ç¼èåˆã€‚</li>\n</ul>\n</li>\n<li><p><strong>å¤šè®¾å¤‡äº¤äº’å‹å¥½</strong></p>\n<ul>\n<li>é”®ç›˜æ§åˆ¶ï¼šæ”¯æŒæ–¹å‘é”®ï¼ˆâ†‘â†“â†â†’ï¼‰ç§»åŠ¨æ–¹å—ï¼Œæ“ä½œç¬¦åˆåŸç‰ˆ2048ä¹ æƒ¯ã€‚</li>\n<li>è§¦å±ä¼˜åŒ–ï¼šæ»‘åŠ¨å±å¹•ï¼ˆä¸Šä¸‹å·¦å³ï¼‰å¯æ§åˆ¶æ–¹å—ç§»åŠ¨ï¼Œæ»‘åŠ¨é˜ˆå€¼åˆç†ï¼ˆé¿å…è¯¯è§¦ï¼‰ã€‚</li>\n<li>æ ¸å¿ƒä¼˜åŒ–ï¼šé€šè¿‡ <code>e.preventDefault()</code> å’Œ <code>touch-action: none</code> é˜»æ­¢è§¦å±æ»‘åŠ¨æ—¶è§¦å‘æ•´ä¸ªåšå®¢é¡µé¢çš„æ»šåŠ¨ï¼Œä¸“æ³¨æ¸¸æˆæ“ä½œã€‚</li>\n<li>æ“ä½œåé¦ˆï¼šæŒ‰é’®çŠ¶æ€åŠ¨æ€å˜åŒ–ï¼ˆå¦‚â€œæ’¤å›â€æŒ‰é’®åœ¨æ— å†å²è®°å½•æ—¶ç¦ç”¨å¹¶åŠé€æ˜ï¼‰ã€‚</li>\n</ul>\n</li>\n<li><p><strong>å®Œæ•´æ¸¸æˆåŠŸèƒ½</strong></p>\n<ul>\n<li>æ ¸å¿ƒç©æ³•ï¼šéšæœºç”Ÿæˆ2&#x2F;4æ–¹å—ï¼Œæ»‘åŠ¨åˆå¹¶ç›¸åŒæ•°å­—ï¼Œç›®æ ‡åˆæˆ2048ã€‚</li>\n<li>æ’¤å›åŠŸèƒ½ï¼šé€šè¿‡å†å²è®°å½•æ ˆä¿å­˜æœ€è¿‘10æ­¥çš„æ¸¸æˆçŠ¶æ€ï¼ˆç½‘æ ¼+åˆ†æ•°ï¼‰ï¼Œç‚¹å‡»â€œæ’¤å›â€å¯å›åˆ°ä¸Šä¸€æ­¥ï¼Œæå‡å®¹é”™æ€§ã€‚</li>\n<li>çŠ¶æ€åˆ¤æ–­ï¼šè‡ªåŠ¨æ£€æµ‹èƒœåˆ©ï¼ˆåˆæˆ2048ï¼‰å’Œå¤±è´¥ï¼ˆæ— ç©ºä½ä¸”æ— æ³•åˆå¹¶ï¼‰ï¼Œå¹¶å¼¹çª—æç¤ºã€‚</li>\n<li>åˆ†æ•°ç³»ç»Ÿï¼šå®æ—¶æ˜¾ç¤ºå½“å‰åˆ†æ•°ï¼Œåˆå¹¶æ–¹å—æ—¶è‡ªåŠ¨ç´¯åŠ ã€‚</li>\n</ul>\n</li>\n<li><p><strong>è½»é‡ç²¾ç®€</strong></p>\n<ul>\n<li>ä»£ç é‡çº¦600è¡Œï¼Œé€»è¾‘æ¸…æ™°ï¼Œæ— å†—ä½™ä»£ç ã€‚</li>\n<li>æ£‹ç›˜ä½¿ç”¨CSS Gridå¸ƒå±€ï¼Œè‡ªé€‚åº”å®¹å™¨å¤§å°ï¼Œåœ¨æ‰‹æœºã€ç”µè„‘ä¸Šå‡å¯æ­£å¸¸æ˜¾ç¤ºï¼ˆé»˜è®¤æœ€å¤§å®½åº¦400pxï¼Œå¯æŒ‰éœ€è°ƒæ•´ï¼‰ã€‚</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"åˆ›å»ºç•Œé¢\"><a href=\"#åˆ›å»ºç•Œé¢\" class=\"headerlink\" title=\"åˆ›å»ºç•Œé¢\"></a>åˆ›å»ºç•Œé¢</h1><p>å¯ä»¥å…ˆä½¿ç”¨æŒ‡ä»¤å•ç‹¬åˆ›å»ºä¸€ä¸ª2048çš„é¡µé¢</p>\n<p><code>hexo new pages &quot;é¡µé¢åç§°&quot;</code></p>\n<p>ç„¶åä½¿ç”¨å·¥å…·ç¼–è¾‘<code>â€œé¡µé¢åç§°â€/index.md</code></p>\n<h1 id=\"ä½¿ç”¨æ–¹æ³•\"><a href=\"#ä½¿ç”¨æ–¹æ³•\" class=\"headerlink\" title=\"ä½¿ç”¨æ–¹æ³•\"></a>ä½¿ç”¨æ–¹æ³•</h1><p>ç›´æ¥å°†ä»£ç å¤åˆ¶åˆ°Hexoçš„Markdownæ–‡ç« ï¼ˆ<code>.md</code>æ–‡ä»¶ï¼‰ä¸­ï¼Œéƒ¨ç½²åå³å¯åœ¨åšå®¢ä¸­è¿è¡Œï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚å¦‚éœ€è°ƒæ•´å¤§å°ï¼Œä¿®æ”¹å®¹å™¨çš„<code>max-width</code>æ ·å¼å³å¯ã€‚</p>\n<h1 id=\"ä»£ç \"><a href=\"#ä»£ç \" class=\"headerlink\" title=\"ä»£ç \"></a>ä»£ç </h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div id=&quot;game-2048-container&quot; style=&quot;max-width: 400px; margin: 20px auto; padding: 15px; border-radius: 8px; transition: all 0.3s ease; background: var(--card-bg); touch-action: none;&quot;&gt;</span><br><span class=\"line\">  &lt;!-- åˆ†æ•°ä¸æ§åˆ¶åŒº --&gt;</span><br><span class=\"line\">  &lt;div style=&quot;display: flex; justify-content: space-between; margin-bottom: 15px; font-family: &#x27;Segoe UI&#x27;, Arial;&quot;&gt;</span><br><span class=\"line\">    &lt;div style=&quot;font-size: 24px; font-weight: bold; color: var(--text-color);&quot;&gt;2048&lt;/div&gt;</span><br><span class=\"line\">    &lt;div style=&quot;background: var(--primary-color); color: white; padding: 5px 10px; border-radius: 4px;&quot;&gt;</span><br><span class=\"line\">      åˆ†æ•°: &lt;span id=&quot;score-2048&quot;&gt;0&lt;/span&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;div style=&quot;display: flex; gap: 5px;&quot;&gt;</span><br><span class=\"line\">      &lt;!-- æŒ‰é’®å¢å¤§ç‚¹å‡»åŒºåŸŸå¹¶æ·»åŠ è§¦æ‘¸åé¦ˆ --&gt;</span><br><span class=\"line\">      &lt;button id=&quot;undo-2048&quot; style=&quot;background: var(--btn-bg); color: var(--btn-color); border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; opacity: 0.5; touch-action: manipulation;&quot; disabled&gt;</span><br><span class=\"line\">        æ’¤å›</span><br><span class=\"line\">      &lt;/button&gt;</span><br><span class=\"line\">      &lt;button id=&quot;reset-2048&quot; style=&quot;background: var(--btn-bg); color: var(--btn-color); border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; touch-action: manipulation;&quot;&gt;</span><br><span class=\"line\">        é‡ç½®</span><br><span class=\"line\">      &lt;/button&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">  &lt;!-- æ¸¸æˆæ£‹ç›˜ --&gt;</span><br><span class=\"line\">  &lt;div id=&quot;game-2048-board&quot; style=&quot;display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">  &lt;!-- æ“ä½œè¯´æ˜ --&gt;</span><br><span class=\"line\">  &lt;div style=&quot;margin-top: 15px; font-size: 14px; color: var(--text-color); font-family: &#x27;Segoe UI&#x27;, Arial;&quot;&gt;</span><br><span class=\"line\">    &lt;p&gt;æ“ä½œï¼šæ–¹å‘é”®æˆ–æ»‘åŠ¨å±å¹•ç§»åŠ¨æ–¹å—ï¼Œç›¸åŒæ•°å­—ç¢°æ’å°†åˆå¹¶&lt;/p&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">const container = document.getElementById(&#x27;game-2048-container&#x27;);</span><br><span class=\"line\">if (container) &#123;</span><br><span class=\"line\">  // è·å–DOMå…ƒç´ </span><br><span class=\"line\">  const boardEl = container.querySelector(&#x27;#game-2048-board&#x27;);</span><br><span class=\"line\">  const scoreEl = container.querySelector(&#x27;#score-2048&#x27;);</span><br><span class=\"line\">  const resetBtn = container.querySelector(&#x27;#reset-2048&#x27;);</span><br><span class=\"line\">  const undoBtn = container.querySelector(&#x27;#undo-2048&#x27;);</span><br><span class=\"line\">  </span><br><span class=\"line\">  // æ¸¸æˆé…ç½®</span><br><span class=\"line\">  const SIZE = 4;</span><br><span class=\"line\">  let grid = [];</span><br><span class=\"line\">  let score = 0;</span><br><span class=\"line\">  let isDarkMode = false;</span><br><span class=\"line\">  let history = [];</span><br><span class=\"line\">  let isTouching = false;</span><br><span class=\"line\">  let touchTarget = null; // è®°å½•è§¦æ‘¸ç›®æ ‡ï¼ŒåŒºåˆ†æŒ‰é’®å’Œæ£‹ç›˜</span><br><span class=\"line\">  </span><br><span class=\"line\">  // é¢œè‰²æ˜ å°„ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const getColors = (value) =&gt; &#123;</span><br><span class=\"line\">    const colors = &#123;</span><br><span class=\"line\">      2: &#123; bg: isDarkMode ? &#x27;#3a3a3a&#x27; : &#x27;#eee4da&#x27;, text: isDarkMode ? &#x27;#fff&#x27; : &#x27;#776e65&#x27; &#125;,</span><br><span class=\"line\">      4: &#123; bg: isDarkMode ? &#x27;#4a4a4a&#x27; : &#x27;#ede0c8&#x27;, text: isDarkMode ? &#x27;#fff&#x27; : &#x27;#776e65&#x27; &#125;,</span><br><span class=\"line\">      8: &#123; bg: isDarkMode ? &#x27;#ff9966&#x27; : &#x27;#f2b179&#x27;, text: &#x27;#f9f6f2&#x27; &#125;,</span><br><span class=\"line\">      16: &#123; bg: isDarkMode ? &#x27;#ff7733&#x27; : &#x27;#f59563&#x27;, text: &#x27;#f9f6f2&#x27; &#125;,</span><br><span class=\"line\">      32: &#123; bg: isDarkMode ? &#x27;#ff5500&#x27; : &#x27;#f67c5f&#x27;, text: &#x27;#f9f6f2&#x27; &#125;,</span><br><span class=\"line\">      64: &#123; bg: isDarkMode ? &#x27;#ff3300&#x27; : &#x27;#f65e3b&#x27;, text: &#x27;#f9f6f2&#x27; &#125;,</span><br><span class=\"line\">      128: &#123; bg: isDarkMode ? &#x27;#ffcc66&#x27; : &#x27;#edcf72&#x27;, text: &#x27;#f9f6f2&#x27; &#125;,</span><br><span class=\"line\">      256: &#123; bg: isDarkMode ? &#x27;#ffbb33&#x27; : &#x27;#edcc61&#x27;, text: &#x27;#f9f6f2&#x27; &#125;,</span><br><span class=\"line\">      512: &#123; bg: isDarkMode ? &#x27;#ffaa00&#x27; : &#x27;#edc850&#x27;, text: &#x27;#f9f6f2&#x27; &#125;,</span><br><span class=\"line\">      1024: &#123; bg: isDarkMode ? &#x27;#ff9900&#x27; : &#x27;#edc53f&#x27;, text: &#x27;#f9f6f2&#x27; &#125;,</span><br><span class=\"line\">      2048: &#123; bg: isDarkMode ? &#x27;#ff8800&#x27; : &#x27;#edc22e&#x27;, text: &#x27;#f9f6f2&#x27; &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    if (!colors[value]) &#123;</span><br><span class=\"line\">      colors[value] = &#123; bg: isDarkMode ? &#x27;#ff5555&#x27; : &#x27;#3c3a32&#x27;, text: &#x27;#f9f6f2&#x27; &#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return colors[value];</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // åˆå§‹åŒ–ç½‘æ ¼ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const initGrid = () =&gt; &#123;</span><br><span class=\"line\">    grid = Array(SIZE).fill().map(() =&gt; Array(SIZE).fill(0));</span><br><span class=\"line\">    score = 0;</span><br><span class=\"line\">    history = [];</span><br><span class=\"line\">    scoreEl.textContent = &#x27;0&#x27;;</span><br><span class=\"line\">    addRandomNumber();</span><br><span class=\"line\">    addRandomNumber();</span><br><span class=\"line\">    updateUndoBtn();</span><br><span class=\"line\">    renderGrid();</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // ä¿å­˜å†å²è®°å½•ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const saveHistory = () =&gt; &#123;</span><br><span class=\"line\">    const gridCopy = JSON.parse(JSON.stringify(grid));</span><br><span class=\"line\">    history.push(&#123; grid: gridCopy, score: score &#125;);</span><br><span class=\"line\">    if (history.length &gt; 10) history.shift();</span><br><span class=\"line\">    updateUndoBtn();</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // æ’¤å›æ“ä½œï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const undoMove = () =&gt; &#123;</span><br><span class=\"line\">    if (history.length === 0) return;</span><br><span class=\"line\">    const lastState = history.pop();</span><br><span class=\"line\">    grid = lastState.grid;</span><br><span class=\"line\">    score = lastState.score;</span><br><span class=\"line\">    scoreEl.textContent = score;</span><br><span class=\"line\">    updateUndoBtn();</span><br><span class=\"line\">    renderGrid();</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // æ›´æ–°æ’¤å›æŒ‰é’®çŠ¶æ€ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const updateUndoBtn = () =&gt; &#123;</span><br><span class=\"line\">    undoBtn.disabled = history.length === 0;</span><br><span class=\"line\">    undoBtn.style.opacity = history.length === 0 ? &#x27;0.5&#x27; : &#x27;1&#x27;;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // éšæœºç”Ÿæˆæ•°å­—ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const addRandomNumber = () =&gt; &#123;</span><br><span class=\"line\">    const emptyCells = [];</span><br><span class=\"line\">    for (let i = 0; i &lt; SIZE; i++) &#123;</span><br><span class=\"line\">      for (let j = 0; j &lt; SIZE; j++) &#123;</span><br><span class=\"line\">        if (grid[i][j] === 0) emptyCells.push(&#123; i, j &#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    if (emptyCells.length === 0) return false;</span><br><span class=\"line\">    const &#123; i, j &#125; = emptyCells[Math.floor(Math.random() * emptyCells.length)];</span><br><span class=\"line\">    grid[i][j] = Math.random() &lt; 0.9 ? 2 : 4;</span><br><span class=\"line\">    return true;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // æ¸²æŸ“ç½‘æ ¼ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const renderGrid = () =&gt; &#123;</span><br><span class=\"line\">    boardEl.innerHTML = &#x27;&#x27;;</span><br><span class=\"line\">    for (let i = 0; i &lt; SIZE; i++) &#123;</span><br><span class=\"line\">      for (let j = 0; j &lt; SIZE; j++) &#123;</span><br><span class=\"line\">        const cell = document.createElement(&#x27;div&#x27;);</span><br><span class=\"line\">        const value = grid[i][j];</span><br><span class=\"line\">        cell.style.width = &#x27;80px&#x27;;</span><br><span class=\"line\">        cell.style.height = &#x27;80px&#x27;;</span><br><span class=\"line\">        cell.style.borderRadius = &#x27;4px&#x27;;</span><br><span class=\"line\">        cell.style.display = &#x27;flex&#x27;;</span><br><span class=\"line\">        cell.style.alignItems = &#x27;center&#x27;;</span><br><span class=\"line\">        cell.style.justifyContent = &#x27;center&#x27;;</span><br><span class=\"line\">        cell.style.fontWeight = &#x27;bold&#x27;;</span><br><span class=\"line\">        cell.style.transition = &#x27;all 0.2s ease&#x27;;</span><br><span class=\"line\">        cell.style.fontFamily = &#x27;Arial, sans-serif&#x27;;</span><br><span class=\"line\">        </span><br><span class=\"line\">        if (value === 0) &#123;</span><br><span class=\"line\">          cell.style.background = isDarkMode ? &#x27;#2a2a2a&#x27; : &#x27;#cdc1b4&#x27;;</span><br><span class=\"line\">          cell.style.color = &#x27;transparent&#x27;;</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">          const &#123; bg, text &#125; = getColors(value);</span><br><span class=\"line\">          cell.style.background = bg;</span><br><span class=\"line\">          cell.style.color = text;</span><br><span class=\"line\">          cell.style.fontSize = value &lt; 100 ? &#x27;24px&#x27; : value &lt; 1000 ? &#x27;20px&#x27; : &#x27;16px&#x27;;</span><br><span class=\"line\">          cell.textContent = value;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        boardEl.appendChild(cell);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // ç§»åŠ¨é€»è¾‘ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const moveLeft = () =&gt; &#123;</span><br><span class=\"line\">    let moved = false;</span><br><span class=\"line\">    for (let i = 0; i &lt; SIZE; i++) &#123;</span><br><span class=\"line\">      for (let j = 1; j &lt; SIZE; j++) &#123;</span><br><span class=\"line\">        if (grid[i][j] !== 0) &#123;</span><br><span class=\"line\">          let k = j;</span><br><span class=\"line\">          while (k &gt; 0 &amp;&amp; grid[i][k - 1] === 0) &#123;</span><br><span class=\"line\">            grid[i][k - 1] = grid[i][k];</span><br><span class=\"line\">            grid[i][k] = 0;</span><br><span class=\"line\">            k--;</span><br><span class=\"line\">            moved = true;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          if (k &gt; 0 &amp;&amp; grid[i][k - 1] === grid[i][k]) &#123;</span><br><span class=\"line\">            grid[i][k - 1] *= 2;</span><br><span class=\"line\">            score += grid[i][k - 1];</span><br><span class=\"line\">            grid[i][k] = 0;</span><br><span class=\"line\">            moved = true;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return moved;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  const moveRight = () =&gt; &#123;</span><br><span class=\"line\">    let moved = false;</span><br><span class=\"line\">    for (let i = 0; i &lt; SIZE; i++) &#123;</span><br><span class=\"line\">      for (let j = SIZE - 2; j &gt;= 0; j--) &#123;</span><br><span class=\"line\">        if (grid[i][j] !== 0) &#123;</span><br><span class=\"line\">          let k = j;</span><br><span class=\"line\">          while (k &lt; SIZE - 1 &amp;&amp; grid[i][k + 1] === 0) &#123;</span><br><span class=\"line\">            grid[i][k + 1] = grid[i][k];</span><br><span class=\"line\">            grid[i][k] = 0;</span><br><span class=\"line\">            k++;</span><br><span class=\"line\">            moved = true;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          if (k &lt; SIZE - 1 &amp;&amp; grid[i][k + 1] === grid[i][k]) &#123;</span><br><span class=\"line\">            grid[i][k + 1] *= 2;</span><br><span class=\"line\">            score += grid[i][k + 1];</span><br><span class=\"line\">            grid[i][k] = 0;</span><br><span class=\"line\">            moved = true;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return moved;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  const moveUp = () =&gt; &#123;</span><br><span class=\"line\">    let moved = false;</span><br><span class=\"line\">    for (let j = 0; j &lt; SIZE; j++) &#123;</span><br><span class=\"line\">      for (let i = 1; i &lt; SIZE; i++) &#123;</span><br><span class=\"line\">        if (grid[i][j] !== 0) &#123;</span><br><span class=\"line\">          let k = i;</span><br><span class=\"line\">          while (k &gt; 0 &amp;&amp; grid[k - 1][j] === 0) &#123;</span><br><span class=\"line\">            grid[k - 1][j] = grid[k][j];</span><br><span class=\"line\">            grid[k][j] = 0;</span><br><span class=\"line\">            k--;</span><br><span class=\"line\">            moved = true;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          if (k &gt; 0 &amp;&amp; grid[k - 1][j] === grid[k][j]) &#123;</span><br><span class=\"line\">            grid[k - 1][j] *= 2;</span><br><span class=\"line\">            score += grid[k - 1][j];</span><br><span class=\"line\">            grid[k][j] = 0;</span><br><span class=\"line\">            moved = true;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return moved;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  const moveDown = () =&gt; &#123;</span><br><span class=\"line\">    let moved = false;</span><br><span class=\"line\">    for (let j = 0; j &lt; SIZE; j++) &#123;</span><br><span class=\"line\">      for (let i = SIZE - 2; i &gt;= 0; i--) &#123;</span><br><span class=\"line\">        if (grid[i][j] !== 0) &#123;</span><br><span class=\"line\">          let k = i;</span><br><span class=\"line\">          while (k &lt; SIZE - 1 &amp;&amp; grid[k + 1][j] === 0) &#123;</span><br><span class=\"line\">            grid[k + 1][j] = grid[k][j];</span><br><span class=\"line\">            grid[k][j] = 0;</span><br><span class=\"line\">            k++;</span><br><span class=\"line\">            moved = true;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          if (k &lt; SIZE - 1 &amp;&amp; grid[k + 1][j] === grid[k][j]) &#123;</span><br><span class=\"line\">            grid[k + 1][j] *= 2;</span><br><span class=\"line\">            score += grid[k + 1][j];</span><br><span class=\"line\">            grid[k][j] = 0;</span><br><span class=\"line\">            moved = true;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return moved;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // å¤„ç†ç§»åŠ¨ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const handleMove = (direction) =&gt; &#123;</span><br><span class=\"line\">    let moved;</span><br><span class=\"line\">    switch (direction) &#123;</span><br><span class=\"line\">      case &#x27;left&#x27;: moved = moveLeft(); break;</span><br><span class=\"line\">      case &#x27;right&#x27;: moved = moveRight(); break;</span><br><span class=\"line\">      case &#x27;up&#x27;: moved = moveUp(); break;</span><br><span class=\"line\">      case &#x27;down&#x27;: moved = moveDown(); break;</span><br><span class=\"line\">      default: return;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    if (moved) &#123;</span><br><span class=\"line\">      saveHistory();</span><br><span class=\"line\">      scoreEl.textContent = score;</span><br><span class=\"line\">      addRandomNumber();</span><br><span class=\"line\">      renderGrid();</span><br><span class=\"line\">      checkGameState();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // æ£€æŸ¥æ¸¸æˆçŠ¶æ€ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const checkGameState = () =&gt; &#123;</span><br><span class=\"line\">    for (let i = 0; i &lt; SIZE; i++) &#123;</span><br><span class=\"line\">      for (let j = 0; j &lt; SIZE; j++) &#123;</span><br><span class=\"line\">        if (grid[i][j] === 2048) &#123;</span><br><span class=\"line\">          setTimeout(() =&gt; alert(&#x27;æ­å–œä½ èµ¢äº†ï¼&#x27;), 300);</span><br><span class=\"line\">          return;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    for (let i = 0; i &lt; SIZE; i++) &#123;</span><br><span class=\"line\">      for (let j = 0; j &lt; SIZE; j++) &#123;</span><br><span class=\"line\">        if (grid[i][j] === 0) return;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    for (let i = 0; i &lt; SIZE; i++) &#123;</span><br><span class=\"line\">      for (let j = 0; j &lt; SIZE - 1; j++) &#123;</span><br><span class=\"line\">        if (grid[i][j] === grid[i][j + 1]) return;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    for (let j = 0; j &lt; SIZE; j++) &#123;</span><br><span class=\"line\">      for (let i = 0; i &lt; SIZE - 1; i++) &#123;</span><br><span class=\"line\">        if (grid[i][j] === grid[i + 1][j]) return;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    setTimeout(() =&gt; alert(&#x27;æ¸¸æˆç»“æŸï¼å¾—åˆ†ï¼š&#x27; + score), 300);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // æ˜æš—æ¨¡å¼é€‚é…ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const checkThemeMode = () =&gt; &#123;</span><br><span class=\"line\">    isDarkMode = document.documentElement.classList.contains(&#x27;dark&#x27;);</span><br><span class=\"line\">    renderGrid();</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  const themeObserver = new MutationObserver(() =&gt; checkThemeMode());</span><br><span class=\"line\">  themeObserver.observe(document.documentElement, &#123; attributes: true &#125;);</span><br><span class=\"line\">  </span><br><span class=\"line\">  // é”®ç›˜æ§åˆ¶ï¼ˆä¿æŒä¸å˜ï¼‰</span><br><span class=\"line\">  const handleKeydown = (e) =&gt; &#123;</span><br><span class=\"line\">    switch (e.key) &#123;</span><br><span class=\"line\">      case &#x27;ArrowLeft&#x27;: handleMove(&#x27;left&#x27;); e.preventDefault(); break;</span><br><span class=\"line\">      case &#x27;ArrowRight&#x27;: handleMove(&#x27;right&#x27;); e.preventDefault(); break;</span><br><span class=\"line\">      case &#x27;ArrowUp&#x27;: handleMove(&#x27;up&#x27;); e.preventDefault(); break;</span><br><span class=\"line\">      case &#x27;ArrowDown&#x27;: handleMove(&#x27;down&#x27;); e.preventDefault(); break;</span><br><span class=\"line\">      default: return;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // è§¦å±æ§åˆ¶ï¼ˆæ ¸å¿ƒä¿®å¤ï¼šåŒºåˆ†æŒ‰é’®å’Œæ£‹ç›˜è§¦æ‘¸ï¼‰</span><br><span class=\"line\">  let touchStartX = 0, touchStartY = 0;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // è§¦æ‘¸å¼€å§‹ï¼šè®°å½•ç›®æ ‡å…ƒç´ </span><br><span class=\"line\">  const handleTouchStart = (e) =&gt; &#123;</span><br><span class=\"line\">    touchTarget = e.target; // è®°å½•è§¦æ‘¸çš„å…ƒç´ ï¼ˆæŒ‰é’®æˆ–æ£‹ç›˜ï¼‰</span><br><span class=\"line\">    // åªæœ‰è§¦æ‘¸æ£‹ç›˜æ—¶æ‰å¤„ç†æ»‘åŠ¨é€»è¾‘</span><br><span class=\"line\">    if (touchTarget === boardEl || boardEl.contains(touchTarget)) &#123;</span><br><span class=\"line\">      isTouching = true;</span><br><span class=\"line\">      touchStartX = e.touches[0].clientX;</span><br><span class=\"line\">      touchStartY = e.touches[0].clientY;</span><br><span class=\"line\">      e.preventDefault();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    // è§¦æ‘¸æŒ‰é’®æ—¶ä¸é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œç¡®ä¿ç‚¹å‡»æœ‰æ•ˆ</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // è§¦æ‘¸ç§»åŠ¨ï¼šåªåœ¨è§¦æ‘¸æ£‹ç›˜æ—¶é˜»æ­¢æ»šåŠ¨</span><br><span class=\"line\">  const handleTouchMove = (e) =&gt; &#123;</span><br><span class=\"line\">    if (isTouching &amp;&amp; (touchTarget === boardEl || boardEl.contains(touchTarget))) &#123;</span><br><span class=\"line\">      e.preventDefault(); // ä»…æ£‹ç›˜æ»‘åŠ¨é˜»æ­¢æ»šåŠ¨</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // è§¦æ‘¸ç»“æŸï¼šåŒºåˆ†å¤„ç†</span><br><span class=\"line\">  const handleTouchEnd = (e) =&gt; &#123;</span><br><span class=\"line\">    if (isTouching) &#123;</span><br><span class=\"line\">      isTouching = false;</span><br><span class=\"line\">      const touchEndX = e.changedTouches[0].clientX;</span><br><span class=\"line\">      const touchEndY = e.changedTouches[0].clientY;</span><br><span class=\"line\">      const diffX = touchEndX - touchStartX;</span><br><span class=\"line\">      const diffY = touchEndY - touchStartY;</span><br><span class=\"line\">      </span><br><span class=\"line\">      if (Math.abs(diffX) &gt; 30 || Math.abs(diffY) &gt; 30) &#123;</span><br><span class=\"line\">        if (Math.abs(diffX) &gt; Math.abs(diffY)) &#123;</span><br><span class=\"line\">          diffX &gt; 0 ? handleMove(&#x27;right&#x27;) : handleMove(&#x27;left&#x27;);</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">          diffY &gt; 0 ? handleMove(&#x27;down&#x27;) : handleMove(&#x27;up&#x27;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      e.preventDefault();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    touchTarget = null; // é‡ç½®è§¦æ‘¸ç›®æ ‡</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // ä¸ºæŒ‰é’®æ·»åŠ ä¸“é—¨çš„è§¦æ‘¸äº‹ä»¶ï¼ˆè§£å†³ç§»åŠ¨ç«¯ç‚¹å‡»æ— ååº”ï¼‰</span><br><span class=\"line\">  const handleButtonTouch = (callback) =&gt; &#123;</span><br><span class=\"line\">    return (e) =&gt; &#123;</span><br><span class=\"line\">      e.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡åˆ°å®¹å™¨</span><br><span class=\"line\">      callback();</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  // äº‹ä»¶ç»‘å®šï¼ˆä¼˜åŒ–ç‰ˆï¼‰</span><br><span class=\"line\">  document.addEventListener(&#x27;keydown&#x27;, handleKeydown);</span><br><span class=\"line\">  container.addEventListener(&#x27;touchstart&#x27;, handleTouchStart, &#123; passive: false &#125;);</span><br><span class=\"line\">  container.addEventListener(&#x27;touchmove&#x27;, handleTouchMove, &#123; passive: false &#125;);</span><br><span class=\"line\">  container.addEventListener(&#x27;touchend&#x27;, handleTouchEnd, &#123; passive: false &#125;);</span><br><span class=\"line\">  </span><br><span class=\"line\">  // æŒ‰é’®å•ç‹¬ç»‘å®šè§¦æ‘¸å’Œç‚¹å‡»äº‹ä»¶ï¼Œç¡®ä¿ç§»åŠ¨ç«¯å“åº”</span><br><span class=\"line\">  resetBtn.addEventListener(&#x27;click&#x27;, initGrid);</span><br><span class=\"line\">  resetBtn.addEventListener(&#x27;touchstart&#x27;, handleButtonTouch(initGrid), &#123; passive: true &#125;);</span><br><span class=\"line\">  undoBtn.addEventListener(&#x27;click&#x27;, undoMove);</span><br><span class=\"line\">  undoBtn.addEventListener(&#x27;touchstart&#x27;, handleButtonTouch(undoMove), &#123; passive: true &#125;);</span><br><span class=\"line\">  </span><br><span class=\"line\">  // åˆå§‹åŒ–</span><br><span class=\"line\">  checkThemeMode();</span><br><span class=\"line\">  initGrid();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"é—®é¢˜\"><a href=\"#é—®é¢˜\" class=\"headerlink\" title=\"é—®é¢˜\"></a>é—®é¢˜</h1><ul>\n<li>è§¦æ§æ¨¡å¼ç¨å¾®æœ‰ç‚¹bugï¼Œåˆ·æ–°ä¸€ä¸‹èƒ½æ¢å¤</li>\n</ul>\n<h1 id=\"æˆªå›¾\"><a href=\"#æˆªå›¾\" class=\"headerlink\" title=\"æˆªå›¾\"></a>æˆªå›¾</h1><p><img src=\"https://cdn.sumi233.top/gh/huang233893/blog-image-bed@main/top/huang233893/imgs/blog/2048-1.jpg\"></p>\n<h1 id=\"Tips\"><a href=\"#Tips\" class=\"headerlink\" title=\"Tips\"></a>Tips</h1><p>æœ¬æ–‡ç« ä¸­çš„ä»£ç ä½¿ç”¨è±†åŒ…AIä¿®æ”¹è€Œæˆï¼Œå¦‚æœ‰é”™è¯¯ï¼Œè¯·æŒ‡å‡ºï¼Œé…¥ç±³å°†ä¼šåŠæ—¶æ›´æ”¹ã€‚</p>\n","categories":[{"name":"æ•™ç¨‹ç±»","path":"api/categories/æ•™ç¨‹ç±».json"}],"tags":[{"name":"åšå®¢","path":"api/tags/åšå®¢.json"},{"name":"æ•™ç¨‹","path":"api/tags/æ•™ç¨‹.json"}]}