{"title":"Linux RAID","slug":"Linux/Linux RAID磁盘阵列","date":"2024-05-27T07:21:46.000Z","updated":"2025-09-21T10:34:31.838Z","comments":true,"path":"api/articles/Linux/Linux RAID磁盘阵列.json","excerpt":null,"covers":null,"content":"<h2 id=\"阵列基础策略\"><a href=\"#阵列基础策略\" class=\"headerlink\" title=\"阵列基础策略\"></a>阵列基础策略</h2><h3 id=\"RAID-0：\"><a href=\"#RAID-0：\" class=\"headerlink\" title=\"RAID 0：\"></a>RAID 0：</h3><p>优点：有效提升硬盘数据的吞吐速度；<br>缺点：不具备数据备份和错误修复能力</p>\n<h3 id=\"RAID-1：\"><a href=\"#RAID-1：\" class=\"headerlink\" title=\"RAID 1：\"></a>RAID 1：</h3><p>优点：数据安全性增加；<br>缺点：磁盘设备读写速度降低，磁盘利用率降低，成本提高</p>\n<h3 id=\"RAID-5：\"><a href=\"#RAID-5：\" class=\"headerlink\" title=\"RAID 5：\"></a>RAID 5：</h3><p>优点：较为均匀的兼顾了读写速度，数据安全性，存储成本</p>\n<h3 id=\"RAID-10：\"><a href=\"#RAID-10：\" class=\"headerlink\" title=\"RAID 10：\"></a>RAID 10：</h3><p>优点：集合了RAID 0 和RAID 1的优点；<br>缺点：成本大幅提高</p>\n<h2 id=\"部署磁盘阵列：\"><a href=\"#部署磁盘阵列：\" class=\"headerlink\" title=\"部署磁盘阵列：\"></a>部署磁盘阵列：</h2><ul>\n<li>使用命令mdadm 模式 RAID设备名称 选项 磁盘成员</li>\n</ul>\n<h3 id=\"选项：\"><a href=\"#选项：\" class=\"headerlink\" title=\"选项：\"></a>选项：</h3><ul>\n<li>-a：检测设备名称</li>\n<li>-n：指定设备数量</li>\n<li>-I：指定RAID级别</li>\n<li>-C：创建</li>\n<li>-v：显示过程</li>\n<li>-f：模拟设备损坏</li>\n<li>-r：移除设备</li>\n<li>-Q：查看摘要信息</li>\n<li>-D：查看详细信息</li>\n<li>-S：停止RAID磁盘阵列</li>\n<li>-x：有备份盘，后接备份盘数量</li>\n</ul>\n<p>例：<code>mdadm -Cv /dev/md0 -a yes -n 4 -l 10 /dev/sda ...</code></p>\n<p>用命令mkfs将制作好的磁盘阵列格式转化为ext4格式：</p>\n<ul>\n<li>mkfs.ext4 RAID文件</li>\n<li>创建文件夹用于挂载阵列文件</li>\n<li>用mount挂载</li>\n<li>可用<code>df -h</code>查看是否成功</li>\n<li>将其加入到磁盘配置文件中使其永久生效：</li>\n<li>可使用重定向或直接进入vim编辑</li>\n</ul>\n<p>输入以下内容：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">磁盘文件         /RAID        ext4           defaults           0  0</span><br></pre></td></tr></table></figure>\n\n\n<ul>\n<li>在RAID 1和RAID10中若一个磁盘损坏可直接添加磁盘后用命令<br><code>mdadm 磁盘阵列 -a 新增磁盘</code></li>\n<li>在使用mdadm 磁盘阵列 -D检测磁盘阵列</li>\n<li>全都为active sync即为成功</li>\n<li>若不为可等待一会，可能是它在往新磁盘同步数据</li>\n</ul>\n<h3 id=\"模拟磁盘损坏：\"><a href=\"#模拟磁盘损坏：\" class=\"headerlink\" title=\"模拟磁盘损坏：\"></a>模拟磁盘损坏：</h3><p><code>mdadm 磁盘阵列 -f 损坏的磁盘</code></p>\n<h3 id=\"磁盘阵列-备份盘\"><a href=\"#磁盘阵列-备份盘\" class=\"headerlink\" title=\"磁盘阵列+备份盘\"></a>磁盘阵列+备份盘</h3><p>指令示例：</p>\n<p><code>mdadm -Cv /dev/md0 -a yes -n 3 -l 5 -x 1 三个组成阵列的磁盘 一个备份盘</code></p>\n","more":"<h2 id=\"阵列基础策略\"><a href=\"#阵列基础策略\" class=\"headerlink\" title=\"阵列基础策略\"></a>阵列基础策略</h2><h3 id=\"RAID-0：\"><a href=\"#RAID-0：\" class=\"headerlink\" title=\"RAID 0：\"></a>RAID 0：</h3><p>优点：有效提升硬盘数据的吞吐速度；<br>缺点：不具备数据备份和错误修复能力</p>\n<h3 id=\"RAID-1：\"><a href=\"#RAID-1：\" class=\"headerlink\" title=\"RAID 1：\"></a>RAID 1：</h3><p>优点：数据安全性增加；<br>缺点：磁盘设备读写速度降低，磁盘利用率降低，成本提高</p>\n<h3 id=\"RAID-5：\"><a href=\"#RAID-5：\" class=\"headerlink\" title=\"RAID 5：\"></a>RAID 5：</h3><p>优点：较为均匀的兼顾了读写速度，数据安全性，存储成本</p>\n<h3 id=\"RAID-10：\"><a href=\"#RAID-10：\" class=\"headerlink\" title=\"RAID 10：\"></a>RAID 10：</h3><p>优点：集合了RAID 0 和RAID 1的优点；<br>缺点：成本大幅提高</p>\n<h2 id=\"部署磁盘阵列：\"><a href=\"#部署磁盘阵列：\" class=\"headerlink\" title=\"部署磁盘阵列：\"></a>部署磁盘阵列：</h2><ul>\n<li>使用命令mdadm 模式 RAID设备名称 选项 磁盘成员</li>\n</ul>\n<h3 id=\"选项：\"><a href=\"#选项：\" class=\"headerlink\" title=\"选项：\"></a>选项：</h3><ul>\n<li>-a：检测设备名称</li>\n<li>-n：指定设备数量</li>\n<li>-I：指定RAID级别</li>\n<li>-C：创建</li>\n<li>-v：显示过程</li>\n<li>-f：模拟设备损坏</li>\n<li>-r：移除设备</li>\n<li>-Q：查看摘要信息</li>\n<li>-D：查看详细信息</li>\n<li>-S：停止RAID磁盘阵列</li>\n<li>-x：有备份盘，后接备份盘数量</li>\n</ul>\n<p>例：<code>mdadm -Cv /dev/md0 -a yes -n 4 -l 10 /dev/sda ...</code></p>\n<p>用命令mkfs将制作好的磁盘阵列格式转化为ext4格式：</p>\n<ul>\n<li>mkfs.ext4 RAID文件</li>\n<li>创建文件夹用于挂载阵列文件</li>\n<li>用mount挂载</li>\n<li>可用<code>df -h</code>查看是否成功</li>\n<li>将其加入到磁盘配置文件中使其永久生效：</li>\n<li>可使用重定向或直接进入vim编辑</li>\n</ul>\n<p>输入以下内容：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">磁盘文件         /RAID        ext4           defaults           0  0</span><br></pre></td></tr></table></figure>\n\n\n<ul>\n<li>在RAID 1和RAID10中若一个磁盘损坏可直接添加磁盘后用命令<br><code>mdadm 磁盘阵列 -a 新增磁盘</code></li>\n<li>在使用mdadm 磁盘阵列 -D检测磁盘阵列</li>\n<li>全都为active sync即为成功</li>\n<li>若不为可等待一会，可能是它在往新磁盘同步数据</li>\n</ul>\n<h3 id=\"模拟磁盘损坏：\"><a href=\"#模拟磁盘损坏：\" class=\"headerlink\" title=\"模拟磁盘损坏：\"></a>模拟磁盘损坏：</h3><p><code>mdadm 磁盘阵列 -f 损坏的磁盘</code></p>\n<h3 id=\"磁盘阵列-备份盘\"><a href=\"#磁盘阵列-备份盘\" class=\"headerlink\" title=\"磁盘阵列+备份盘\"></a>磁盘阵列+备份盘</h3><p>指令示例：</p>\n<p><code>mdadm -Cv /dev/md0 -a yes -n 3 -l 5 -x 1 三个组成阵列的磁盘 一个备份盘</code></p>\n","categories":[{"name":"系统类","path":"api/categories/系统类.json"}],"tags":[{"name":"Linux","path":"api/tags/Linux.json"},{"name":"指令","path":"api/tags/指令.json"}]}