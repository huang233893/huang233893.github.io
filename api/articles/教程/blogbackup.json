{"title":"自动备份你的Hexo博客","slug":"教程/blogbackup","date":"2025-10-10T07:55:13.000Z","updated":"2025-10-10T10:29:12.386Z","comments":true,"path":"api/articles/教程/blogbackup.json","excerpt":null,"covers":["https://cdn.sumi233.top/gh/huang233893/blog-image-bed@main/top/huang233893/imgs/blog/ht3-1.png","https://cdn.sumi233.top/gh/huang233893/blog-image-bed@main/top/huang233893/imgs/blog/ht3-2.png"],"content":"<h1 id=\"前提\"><a href=\"#前提\" class=\"headerlink\" title=\"前提\"></a>前提</h1><p>最近十分难绷，为了搞code-server远程编辑博客，把博客的依赖给刷掉了，还好之前有备份逃过一劫，这也让我萌生了一个想法，可不可以把hexo源代码备份到github仓库上面呢？于是我在万能的度娘寻找答案，还真给我找到了一个方法。</p>\n<h1 id=\"原文章地址\"><a href=\"#原文章地址\" class=\"headerlink\" title=\"原文章地址\"></a>原文章地址</h1><div calss=\"anzhiyu-tag-link\"><a class=\"tag-Link\" target=\"_blank\" href=\"https://blog.cyida.com/2023/32DJ476.html\">\n    <div class=\"tag-link-tips\">引用站外地址</div>\n    <div class=\"tag-link-bottom\">\n        <div class=\"tag-link-left\" style>\n          <i class=\"anzhiyufont anzhiyu-icon-link\" style></i>\n        </div>\n        <div class=\"tag-link-right\">\n            <div class=\"tag-link-title\">自动备份 Hexo 博客源文件</div>\n            <div class=\"tag-link-sitename\">AISYUN's Blog</div>\n        </div>\n        <i class=\"anzhiyufont anzhiyu-icon-angle-right\"></i>\n    </div>\n    </a></div>\n\n<p>感谢AISYUN大佬提供的方案，此文章只做记录留档，如侵犯到您的权利，请联系我下架此文章，谢谢~</p>\n<h1 id=\"正文\"><a href=\"#正文\" class=\"headerlink\" title=\"正文\"></a>正文</h1><h2 id=\"将Hexo目录加入到Git仓库中\"><a href=\"#将Hexo目录加入到Git仓库中\" class=\"headerlink\" title=\"将Hexo目录加入到Git仓库中\"></a>将Hexo目录加入到Git仓库中</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git init</span><br><span class=\"line\">git remote add origin git@github.com:Github用户名/项目名字.git</span><br><span class=\"line\">git pull origin main # 原教程中为Master，现已替换为main</span><br></pre></td></tr></table></figure>\n\n<p>建议在博客根目录中写入<code>.gitignore</code> 文件，填入以下内容：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public/</span><br><span class=\"line\">.deploy</span><br><span class=\"line\">.deploy_git/</span><br><span class=\"line\">*.log</span><br></pre></td></tr></table></figure>\n<p>这样可以防止编译过的网页以及log文件被上传到仓库里，提升备份速度</p>\n<p>然后再执行以下命令，手动将源代码首次推送至Github仓库中：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m &quot;备份hexo源码文件&quot;</span><br><span class=\"line\">git push origin master</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"自动化实现\"><a href=\"#自动化实现\" class=\"headerlink\" title=\"自动化实现\"></a>自动化实现</h2><p>首先安装shelljs</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --save shelljs</span><br></pre></td></tr></table></figure>\n\n<p>然后在博客根目录&#x2F;scripts（如果没有此文件夹，就创建一个）文件夹里，创建一个名为<code>auto_backup.js</code>的脚本</p>\n<p>并且填入以下内容：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">require(&#x27;shelljs/global&#x27;);</span><br><span class=\"line\">try &#123;</span><br><span class=\"line\">    hexo.on(&#x27;deployAfter&#x27;, function() &#123;//当deploy完成后执行备份</span><br><span class=\"line\">        run();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125; catch (e) &#123;</span><br><span class=\"line\">    console.log(&quot;产生了一个错误啊&lt;(￣3￣)&gt; !，错误详情为：&quot; + e.toString());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">function run() &#123;</span><br><span class=\"line\">    if (!which(&#x27;git&#x27;)) &#123;</span><br><span class=\"line\">        echo(&#x27;Sorry, this script requires git&#x27;);</span><br><span class=\"line\">        exit(1);</span><br><span class=\"line\">    &#125; else &#123;</span><br><span class=\"line\">        echo(&quot;======================Auto Backup Begin===========================&quot;);</span><br><span class=\"line\">        cd(&#x27;Your Blog Folder&#x27;);    //此处修改为Hexo根目录路径</span><br><span class=\"line\">        if (exec(&#x27;git add --all&#x27;).code !== 0) &#123;</span><br><span class=\"line\">            echo(&#x27;Error: Git add failed&#x27;);</span><br><span class=\"line\">            exit(1);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (exec(&#x27;git commit -am &quot;blog auto backup script\\&#x27;s commit&quot;&#x27;).code !== 0) &#123;</span><br><span class=\"line\">            echo(&#x27;Error: Git commit failed&#x27;);</span><br><span class=\"line\">            exit(1);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (exec(&#x27;git push origin main&#x27;).code !== 0) &#123;</span><br><span class=\"line\">            echo(&#x27;Error: Git push failed&#x27;);</span><br><span class=\"line\">            exit(1);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        echo(&quot;==================Auto Backup Complete============================&quot;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<ul>\n<li>Your Blog Folder处请改成自己博客的<strong>绝对</strong>目录路径如：D:&#x2F;blog&#x2F;</li>\n<li>如果你的仓库名称不是默认origin和分支不是main的话，需改成自己的仓库和相应分支名</li>\n</ul>\n<h2 id=\"结果\"><a href=\"#结果\" class=\"headerlink\" title=\"结果\"></a>结果</h2><p>保存好脚本，在博客目录执行<code>hexo deploy</code>命令，在博客常规推送之后，会出现以下输出：</p>\n<p><img src=\"https://cdn.sumi233.top/gh/huang233893/blog-image-bed@main/top/huang233893/imgs/blog/ht3-1.png\"></p>\n<p>就证明博客代码推送成功啦~</p>\n<p><img src=\"https://cdn.sumi233.top/gh/huang233893/blog-image-bed@main/top/huang233893/imgs/blog/ht3-2.png\"></p>\n<p>此时查看Github仓库上也有相应的博客代码啦！</p>\n","more":"<h1 id=\"前提\"><a href=\"#前提\" class=\"headerlink\" title=\"前提\"></a>前提</h1><p>最近十分难绷，为了搞code-server远程编辑博客，把博客的依赖给刷掉了，还好之前有备份逃过一劫，这也让我萌生了一个想法，可不可以把hexo源代码备份到github仓库上面呢？于是我在万能的度娘寻找答案，还真给我找到了一个方法。</p>\n<h1 id=\"原文章地址\"><a href=\"#原文章地址\" class=\"headerlink\" title=\"原文章地址\"></a>原文章地址</h1><div calss=\"anzhiyu-tag-link\"><a class=\"tag-Link\" target=\"_blank\" href=\"https://blog.cyida.com/2023/32DJ476.html\">\n    <div class=\"tag-link-tips\">引用站外地址</div>\n    <div class=\"tag-link-bottom\">\n        <div class=\"tag-link-left\" style>\n          <i class=\"anzhiyufont anzhiyu-icon-link\" style></i>\n        </div>\n        <div class=\"tag-link-right\">\n            <div class=\"tag-link-title\">自动备份 Hexo 博客源文件</div>\n            <div class=\"tag-link-sitename\">AISYUN's Blog</div>\n        </div>\n        <i class=\"anzhiyufont anzhiyu-icon-angle-right\"></i>\n    </div>\n    </a></div>\n\n<p>感谢AISYUN大佬提供的方案，此文章只做记录留档，如侵犯到您的权利，请联系我下架此文章，谢谢~</p>\n<h1 id=\"正文\"><a href=\"#正文\" class=\"headerlink\" title=\"正文\"></a>正文</h1><h2 id=\"将Hexo目录加入到Git仓库中\"><a href=\"#将Hexo目录加入到Git仓库中\" class=\"headerlink\" title=\"将Hexo目录加入到Git仓库中\"></a>将Hexo目录加入到Git仓库中</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git init</span><br><span class=\"line\">git remote add origin git@github.com:Github用户名/项目名字.git</span><br><span class=\"line\">git pull origin main # 原教程中为Master，现已替换为main</span><br></pre></td></tr></table></figure>\n\n<p>建议在博客根目录中写入<code>.gitignore</code> 文件，填入以下内容：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public/</span><br><span class=\"line\">.deploy</span><br><span class=\"line\">.deploy_git/</span><br><span class=\"line\">*.log</span><br></pre></td></tr></table></figure>\n<p>这样可以防止编译过的网页以及log文件被上传到仓库里，提升备份速度</p>\n<p>然后再执行以下命令，手动将源代码首次推送至Github仓库中：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m &quot;备份hexo源码文件&quot;</span><br><span class=\"line\">git push origin master</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"自动化实现\"><a href=\"#自动化实现\" class=\"headerlink\" title=\"自动化实现\"></a>自动化实现</h2><p>首先安装shelljs</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --save shelljs</span><br></pre></td></tr></table></figure>\n\n<p>然后在博客根目录&#x2F;scripts（如果没有此文件夹，就创建一个）文件夹里，创建一个名为<code>auto_backup.js</code>的脚本</p>\n<p>并且填入以下内容：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">require(&#x27;shelljs/global&#x27;);</span><br><span class=\"line\">try &#123;</span><br><span class=\"line\">    hexo.on(&#x27;deployAfter&#x27;, function() &#123;//当deploy完成后执行备份</span><br><span class=\"line\">        run();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125; catch (e) &#123;</span><br><span class=\"line\">    console.log(&quot;产生了一个错误啊&lt;(￣3￣)&gt; !，错误详情为：&quot; + e.toString());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">function run() &#123;</span><br><span class=\"line\">    if (!which(&#x27;git&#x27;)) &#123;</span><br><span class=\"line\">        echo(&#x27;Sorry, this script requires git&#x27;);</span><br><span class=\"line\">        exit(1);</span><br><span class=\"line\">    &#125; else &#123;</span><br><span class=\"line\">        echo(&quot;======================Auto Backup Begin===========================&quot;);</span><br><span class=\"line\">        cd(&#x27;Your Blog Folder&#x27;);    //此处修改为Hexo根目录路径</span><br><span class=\"line\">        if (exec(&#x27;git add --all&#x27;).code !== 0) &#123;</span><br><span class=\"line\">            echo(&#x27;Error: Git add failed&#x27;);</span><br><span class=\"line\">            exit(1);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (exec(&#x27;git commit -am &quot;blog auto backup script\\&#x27;s commit&quot;&#x27;).code !== 0) &#123;</span><br><span class=\"line\">            echo(&#x27;Error: Git commit failed&#x27;);</span><br><span class=\"line\">            exit(1);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        if (exec(&#x27;git push origin main&#x27;).code !== 0) &#123;</span><br><span class=\"line\">            echo(&#x27;Error: Git push failed&#x27;);</span><br><span class=\"line\">            exit(1);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        echo(&quot;==================Auto Backup Complete============================&quot;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<ul>\n<li>Your Blog Folder处请改成自己博客的<strong>绝对</strong>目录路径如：D:&#x2F;blog&#x2F;</li>\n<li>如果你的仓库名称不是默认origin和分支不是main的话，需改成自己的仓库和相应分支名</li>\n</ul>\n<h2 id=\"结果\"><a href=\"#结果\" class=\"headerlink\" title=\"结果\"></a>结果</h2><p>保存好脚本，在博客目录执行<code>hexo deploy</code>命令，在博客常规推送之后，会出现以下输出：</p>\n<p><img src=\"https://cdn.sumi233.top/gh/huang233893/blog-image-bed@main/top/huang233893/imgs/blog/ht3-1.png\"></p>\n<p>就证明博客代码推送成功啦~</p>\n<p><img src=\"https://cdn.sumi233.top/gh/huang233893/blog-image-bed@main/top/huang233893/imgs/blog/ht3-2.png\"></p>\n<p>此时查看Github仓库上也有相应的博客代码啦！</p>\n","categories":[{"name":"教程类","path":"api/categories/教程类.json"}],"tags":[{"name":"博客","path":"api/tags/博客.json"},{"name":"教程","path":"api/tags/教程.json"}]}