{"title":"RIP基础","slug":"CCNA/RIP基础","date":"2024-10-17T07:01:46.000Z","updated":"2025-08-02T10:16:12.986Z","comments":true,"path":"api/articles/CCNA/RIP基础.json","excerpt":null,"covers":["https://cdn.sumi233.top/gh/huang233893/blog-image-bed/top/huang233893/imgs/blog/RIP%20(2).png","https://cdn.sumi233.top/gh/huang233893/blog-image-bed/top/huang233893/imgs/blog/RIP%20(1).png"],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"\\assets\\js\\Meting.min.js\"></script><h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>RIP是一种内部网关协议（IGP），是一种动态路由选择协议，用于自治系统（AS）内的路由信息传递。</p>\n<p>RIP协议基于距离矢量算法（Distance Vector Algorithms），使用“跳数”（metric）来衡量到达目的地址的路由距离。</p>\n<p>RIP通过UDP报文进行路由进行路由信息交换，使用的端口为520.</p>\n<p>RIP包括v1和v2两个版本</p>\n<h2 id=\"RIP的版本比较\"><a href=\"#RIP的版本比较\" class=\"headerlink\" title=\"RIP的版本比较\"></a>RIP的版本比较</h2><p>**<font style=\"background-color:#D8DAD9;\">RIP V1 **<br>有类路由协议<br>不支持VLSM<br>广播更新255.255.255.255</font></p>\n<p>**<font style=\"background-color:#D8DAD9;\">RIP V2 **<br>无类路由协议<br>支持VLSM<br>组播更新224.0.0.9</font></p>\n<h2 id=\"基础运行步骤（四个定时器）\"><a href=\"#基础运行步骤（四个定时器）\" class=\"headerlink\" title=\"基础运行步骤（四个定时器）\"></a>基础运行步骤（四个定时器）</h2><ul>\n<li>开启RIP进程，宣告接口，开始接收报文，发送UDP报文</li>\n<li>根据收到的RIP报文构建自己的路由表</li>\n<li>每隔30S发送更新报文来更新维护路由表“更新定时器”</li>\n<li>路由器为自己的每条路由表项启动180S的“老化定时器”。180s内如果收到了更新报文，则重置定时器</li>\n<li>如果上面180S到期，则启动120S的“垃圾收集定时器”，同时将该路由表项度量值置为16</li>\n<li>120S过后，路由器仍未收到相应路由表项的更新，则路由器删除该表项</li>\n<li>当RIP设备收到对端cost为16的路由更新时，为防止路由震荡，启动“抑制定时器”，在这个定时器超时前，不再接受对端任何路由</li>\n</ul>\n<h2 id=\"触发更新\"><a href=\"#触发更新\" class=\"headerlink\" title=\"触发更新\"></a>触发更新</h2><p>可以缩短网络收敛时间，一个路由表最多等待120S才能被删除（垃圾收集时间）；如果不存在触发更新，最多需要等待300S（老化时间+垃圾收集时间）</p>\n<h2 id=\"水平分割\"><a href=\"#水平分割\" class=\"headerlink\" title=\"水平分割\"></a>水平分割</h2><ul>\n<li>RIP从某个接口学到的路由，不会从该接口再回发给邻居路由器。</li>\n<li>作用减少带宽损耗，防止路由环路。也解决了“坏消息传播得慢”</li>\n</ul>\n<h2 id=\"毒化逆转\"><a href=\"#毒化逆转\" class=\"headerlink\" title=\"毒化逆转\"></a>毒化逆转</h2><ul>\n<li>一个接口学来的路由项，把度量值改为16再原路发回去，也可以避免环路发生，实践中使用比较少。</li>\n</ul>\n<h2 id=\"抑制计时\"><a href=\"#抑制计时\" class=\"headerlink\" title=\"抑制计时\"></a>抑制计时</h2><ul>\n<li>一条路由信息无效之后，一段时间内这条路由都处于抑制状态，即在一定时间内不再接收关于同一目的地址的路由更新。</li>\n<li>如果，路由器从一个网段上得知一条路径失效，然后，立即在另一个网段上得知这个路由有效。这个有效的信息往往是不正确的，抑制计时避免了这个问题，而且，当一条链路频繁起停时，抑制计时减少了路由的浮动，增加了网络的稳定性。</li>\n</ul>\n<h2 id=\"报文类型\"><a href=\"#报文类型\" class=\"headerlink\" title=\"报文类型\"></a>报文类型</h2><blockquote>\n<p>RIPV1 引用至华为文档</p>\n<p><img src=\"https://cdn.sumi233.top/gh/huang233893/blog-image-bed/top/huang233893/imgs/blog/RIP%20(2).png\"></p>\n</blockquote>\n<ul>\n<li><strong>命令字段</strong>（Command）：该字段用于标识RIP报文的类型。取值为1表示为Request报文，取值为2表示Response报文。 </li>\n<li><strong>版本字段</strong> （Version）：在RIP-1中，该字段取值为1。 </li>\n<li><strong>址族标识符</strong> （Address family identifier）：该字段值为2表示IP协议，如果该报文为Request报文并且用于向直连路由设备请求整张路由表，则该字段值被设置为0，同时这个Request报文中包含且仅包含一个路由条目，该路由的目的网络地址为0.0.0.0，度量值为16。 </li>\n<li><strong>IP地址</strong> （IP address）：路由的目的网络地址。 </li>\n<li><strong>度量值</strong> （Metric）：该路由的度量值。</li>\n</ul>\n<blockquote>\n<p>RIP V2 引用至华为文档</p>\n<p><img src=\"https://cdn.sumi233.top/gh/huang233893/blog-image-bed/top/huang233893/imgs/blog/RIP%20(1).png\"></p>\n</blockquote>\n<ul>\n<li><strong>命令字段</strong> （Command）：该字段用于标识RIP报文的类型。取值为1表示为Request报文，取值为2表示Response报文。 </li>\n<li><strong>版本字段</strong> （Version）：在RIP-2中，该字段取值为2。 </li>\n<li><strong>地址族标识符</strong> （Address Family Identifier）：与RIP-1类似。 </li>\n<li><strong>路由标记</strong>（Route Tag）：用于为路由设置标记信息，可以在路由策略中根据Tag对路由进行灵活的控制。例如，当一条外部路由被引入RIP从而形成一条RIP路由时，RIP可以为该路由设置路由标记，当这条路由在整个RIP路由域传播时，路由标记不会丢失。 </li>\n<li><strong>IP地址</strong> （IP Address）：路由的目的网络地址。 </li>\n<li><strong>网络掩码</strong> （Subnet Mask）：用于存储路由条目的目的网络掩码，RIP-2进而支持可变长子网掩码（VLSM，Variable Length Subnet Mask），支持路由聚合和CIDR（Classless Inter-Domain Routing）。 </li>\n<li><strong>下一跳</strong> （Next Hop）：RIP-2定义了该字段，避免路由设备在多路访问网络上可以表面次优路径现象，在广播网上可以选择到最优下一跳地址。 </li>\n<li><strong>度量值</strong> （Metric）：该路由的度量值。</li>\n</ul>\n<h2 id=\"配置实践\"><a href=\"#配置实践\" class=\"headerlink\" title=\"配置实践\"></a>配置实践</h2><h3 id=\"基础配置\"><a href=\"#基础配置\" class=\"headerlink\" title=\"基础配置\"></a>基础配置</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Router(config)# router rip</span><br><span class=\"line\">Router(config-if)# network address #宣告网段</span><br><span class=\"line\">Router(config-if)# version 2 #使用RIPv2版本的RIP协议</span><br></pre></td></tr></table></figure>\n\n","more":"<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>RIP是一种内部网关协议（IGP），是一种动态路由选择协议，用于自治系统（AS）内的路由信息传递。</p>\n<p>RIP协议基于距离矢量算法（Distance Vector Algorithms），使用“跳数”（metric）来衡量到达目的地址的路由距离。</p>\n<p>RIP通过UDP报文进行路由进行路由信息交换，使用的端口为520.</p>\n<p>RIP包括v1和v2两个版本</p>\n<h2 id=\"RIP的版本比较\"><a href=\"#RIP的版本比较\" class=\"headerlink\" title=\"RIP的版本比较\"></a>RIP的版本比较</h2><p>**<font style=\"background-color:#D8DAD9;\">RIP V1 **<br>有类路由协议<br>不支持VLSM<br>广播更新255.255.255.255</font></p>\n<p>**<font style=\"background-color:#D8DAD9;\">RIP V2 **<br>无类路由协议<br>支持VLSM<br>组播更新224.0.0.9</font></p>\n<h2 id=\"基础运行步骤（四个定时器）\"><a href=\"#基础运行步骤（四个定时器）\" class=\"headerlink\" title=\"基础运行步骤（四个定时器）\"></a>基础运行步骤（四个定时器）</h2><ul>\n<li>开启RIP进程，宣告接口，开始接收报文，发送UDP报文</li>\n<li>根据收到的RIP报文构建自己的路由表</li>\n<li>每隔30S发送更新报文来更新维护路由表“更新定时器”</li>\n<li>路由器为自己的每条路由表项启动180S的“老化定时器”。180s内如果收到了更新报文，则重置定时器</li>\n<li>如果上面180S到期，则启动120S的“垃圾收集定时器”，同时将该路由表项度量值置为16</li>\n<li>120S过后，路由器仍未收到相应路由表项的更新，则路由器删除该表项</li>\n<li>当RIP设备收到对端cost为16的路由更新时，为防止路由震荡，启动“抑制定时器”，在这个定时器超时前，不再接受对端任何路由</li>\n</ul>\n<h2 id=\"触发更新\"><a href=\"#触发更新\" class=\"headerlink\" title=\"触发更新\"></a>触发更新</h2><p>可以缩短网络收敛时间，一个路由表最多等待120S才能被删除（垃圾收集时间）；如果不存在触发更新，最多需要等待300S（老化时间+垃圾收集时间）</p>\n<h2 id=\"水平分割\"><a href=\"#水平分割\" class=\"headerlink\" title=\"水平分割\"></a>水平分割</h2><ul>\n<li>RIP从某个接口学到的路由，不会从该接口再回发给邻居路由器。</li>\n<li>作用减少带宽损耗，防止路由环路。也解决了“坏消息传播得慢”</li>\n</ul>\n<h2 id=\"毒化逆转\"><a href=\"#毒化逆转\" class=\"headerlink\" title=\"毒化逆转\"></a>毒化逆转</h2><ul>\n<li>一个接口学来的路由项，把度量值改为16再原路发回去，也可以避免环路发生，实践中使用比较少。</li>\n</ul>\n<h2 id=\"抑制计时\"><a href=\"#抑制计时\" class=\"headerlink\" title=\"抑制计时\"></a>抑制计时</h2><ul>\n<li>一条路由信息无效之后，一段时间内这条路由都处于抑制状态，即在一定时间内不再接收关于同一目的地址的路由更新。</li>\n<li>如果，路由器从一个网段上得知一条路径失效，然后，立即在另一个网段上得知这个路由有效。这个有效的信息往往是不正确的，抑制计时避免了这个问题，而且，当一条链路频繁起停时，抑制计时减少了路由的浮动，增加了网络的稳定性。</li>\n</ul>\n<h2 id=\"报文类型\"><a href=\"#报文类型\" class=\"headerlink\" title=\"报文类型\"></a>报文类型</h2><blockquote>\n<p>RIPV1 引用至华为文档</p>\n<p><img src=\"https://cdn.sumi233.top/gh/huang233893/blog-image-bed/top/huang233893/imgs/blog/RIP%20(2).png\"></p>\n</blockquote>\n<ul>\n<li><strong>命令字段</strong>（Command）：该字段用于标识RIP报文的类型。取值为1表示为Request报文，取值为2表示Response报文。 </li>\n<li><strong>版本字段</strong> （Version）：在RIP-1中，该字段取值为1。 </li>\n<li><strong>址族标识符</strong> （Address family identifier）：该字段值为2表示IP协议，如果该报文为Request报文并且用于向直连路由设备请求整张路由表，则该字段值被设置为0，同时这个Request报文中包含且仅包含一个路由条目，该路由的目的网络地址为0.0.0.0，度量值为16。 </li>\n<li><strong>IP地址</strong> （IP address）：路由的目的网络地址。 </li>\n<li><strong>度量值</strong> （Metric）：该路由的度量值。</li>\n</ul>\n<blockquote>\n<p>RIP V2 引用至华为文档</p>\n<p><img src=\"https://cdn.sumi233.top/gh/huang233893/blog-image-bed/top/huang233893/imgs/blog/RIP%20(1).png\"></p>\n</blockquote>\n<ul>\n<li><strong>命令字段</strong> （Command）：该字段用于标识RIP报文的类型。取值为1表示为Request报文，取值为2表示Response报文。 </li>\n<li><strong>版本字段</strong> （Version）：在RIP-2中，该字段取值为2。 </li>\n<li><strong>地址族标识符</strong> （Address Family Identifier）：与RIP-1类似。 </li>\n<li><strong>路由标记</strong>（Route Tag）：用于为路由设置标记信息，可以在路由策略中根据Tag对路由进行灵活的控制。例如，当一条外部路由被引入RIP从而形成一条RIP路由时，RIP可以为该路由设置路由标记，当这条路由在整个RIP路由域传播时，路由标记不会丢失。 </li>\n<li><strong>IP地址</strong> （IP Address）：路由的目的网络地址。 </li>\n<li><strong>网络掩码</strong> （Subnet Mask）：用于存储路由条目的目的网络掩码，RIP-2进而支持可变长子网掩码（VLSM，Variable Length Subnet Mask），支持路由聚合和CIDR（Classless Inter-Domain Routing）。 </li>\n<li><strong>下一跳</strong> （Next Hop）：RIP-2定义了该字段，避免路由设备在多路访问网络上可以表面次优路径现象，在广播网上可以选择到最优下一跳地址。 </li>\n<li><strong>度量值</strong> （Metric）：该路由的度量值。</li>\n</ul>\n<h2 id=\"配置实践\"><a href=\"#配置实践\" class=\"headerlink\" title=\"配置实践\"></a>配置实践</h2><h3 id=\"基础配置\"><a href=\"#基础配置\" class=\"headerlink\" title=\"基础配置\"></a>基础配置</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Router(config)# router rip</span><br><span class=\"line\">Router(config-if)# network address #宣告网段</span><br><span class=\"line\">Router(config-if)# version 2 #使用RIPv2版本的RIP协议</span><br></pre></td></tr></table></figure>\n\n","categories":[{"name":"思科","path":"api/categories/思科.json"}],"tags":[{"name":"网络","path":"api/tags/网络.json"},{"name":"CCNA","path":"api/tags/CCNA.json"}]}