function initializeCard(){cardTimes(),cardRefreshTimes()}document.addEventListener("DOMContentLoaded",()=>{initializeCard()}),document.addEventListener("pjax:complete",()=>{initializeCard()});let year,month,week,date,dates,weekStr,monthStr,asideTime,asideDay,asideDayNum,animalYear,ganzhiYear,lunarMon,lunarDay,now=new Date;function cardRefreshTimes(){var e=document.getElementById("card-widget-schedule");e&&(asideDay=(now-asideTime)/1e3/60/60/24,e.querySelector("#pBar_year").value=asideDay,e.querySelector("#p_span_year").innerHTML=(asideDay/365*100).toFixed(1)+"%",e.querySelector(".schedule-r0 .schedule-d1 .aside-span2").innerHTML=`还剩<a> ${(365-asideDay).toFixed(0)} </a>天`,e.querySelector("#pBar_month").value=date,e.querySelector("#pBar_month").max=dates,e.querySelector("#p_span_month").innerHTML=(date/dates*100).toFixed(1)+"%",e.querySelector(".schedule-r1 .schedule-d1 .aside-span2").innerHTML=`还剩<a> ${dates-date} </a>天`,e.querySelector("#pBar_week").value=0===week?7:week,e.querySelector("#p_span_week").innerHTML=((0===week?7:week)/7*100).toFixed(1)+"%",e.querySelector(".schedule-r2 .schedule-d1 .aside-span2").innerHTML=`还剩<a> ${7-(0===week?7:week)} </a>天`)}function cardTimes(){year=now.getFullYear(),month=now.getMonth(),week=now.getDay(),date=now.getDate();var a=document.getElementById("card-widget-calendar");if(a){var t=year%4==0&&year%100!=0||year%400==0,t=(weekStr=["周日","周一","周二","周三","周四","周五","周六"][week],[{month:"1月",days:31},{month:"2月",days:t?29:28},{month:"3月",days:31},{month:"4月",days:30},{month:"5月",days:31},{month:"6月",days:30},{month:"7月",days:31},{month:"8月",days:31},{month:"9月",days:30},{month:"10月",days:31},{month:"11月",days:30},{month:"12月",days:31}]),d=(monthStr=t[month].month,dates=t[month].days,(week+8-date%7)%7);let r="",n=!1,e=7-d;var o=(dates-e)%7==0?Math.floor((dates-e)/7)+1:Math.floor((dates-e)/7)+2,i=a.querySelector("#calendar-main");a.querySelector("#calendar-date").style.fontSize=["64px","48px","36px"][Math.min(o-3,2)];for(let a=0;a<o;a++){i.querySelector(".calendar-r"+a)||(i.innerHTML+=`<div class='calendar-r${a}'></div>`);for(let e=0;e<7;e++){0===a&&e===d&&(r=1,n=!0);var s=r===date?" class='now'":"";i.querySelector(`.calendar-r${a} .calendar-d${e} a`)||(i.querySelector(".calendar-r"+a).innerHTML+=`<div class='calendar-d${e}'><a${s}>${r}</a></div>`),r>=dates&&(r="",n=!1),n&&(r+=1)}}var t=chineseLunar.solarToLunar(new Date(year,month,date)),t=(animalYear=chineseLunar.format(t,"A"),ganzhiYear=chineseLunar.format(t,"T").slice(0,-1),lunarMon=chineseLunar.format(t,"M"),lunarDay=chineseLunar.format(t,"d"),new Date("2027/02/05 00:00:00")),t=Math.floor((t-now)/1e3/60/60/24),l=(asideTime=new Date((new Date).getFullYear()+"/01/01 00:00:00"),asideDay=(now-asideTime)/1e3/60/60/24,asideDayNum=Math.floor(asideDay),0<=week-asideDayNum%7?Math.ceil(asideDayNum/7):Math.ceil(asideDayNum/7)+1);a.querySelector("#calendar-week").innerHTML=`第${l}周&nbsp;`+weekStr,a.querySelector("#calendar-date").innerHTML=date.toString().padStart(2,"0"),a.querySelector("#calendar-solar").innerHTML=`${year}年${monthStr}&nbsp;第${asideDay.toFixed(0)}天`,a.querySelector("#calendar-lunar").innerHTML=""+ganzhiYear+animalYear+"年&nbsp;"+lunarMon+lunarDay,document.getElementById("schedule-days").innerHTML=t}}